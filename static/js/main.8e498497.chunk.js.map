{"version":3,"sources":["../src sync ///translations//.*/.json$","../src sync ///on-startup/.(ts|tsx)$","../src sync //.css$","app/robot/store/selectors.ts","app/common/array-reducers.ts","app/robot/bluetooth-utils.ts","app/robot/widget/index.tsx","app/common/cube/libs/algorithms.ts","app/common/cube/libs/cube.ts","app/common/cube/libs/tools.ts","app/common/cube/libs/coordinates.ts","app/common/cube/scramblers/solve-criteria.ts","app/common/cube/scramblers/full.ts","app/common/cube/solvers/five-side-solver.ts","app/common/cube/libs/move-table.ts","app/common/cube/libs/pruning-table.ts","app/common/cube/libs/search.ts","app/common/cube/libs/scramble-pieces.ts","app/common/cube/solvers/cross-solver.ts","app/common/cube/libs/cube-preview.ts","app/cube-preview/index.tsx","app/common/styled-components.ts","app/cfop-scramble/index.tsx","app/common/cube/scramblers/cfop.ts","app/random-scramble/index.tsx","app/manual-scramble/index.tsx","app/main-screen/index.tsx","app/common/webpack.ts","translations/index.ts","serviceWorker.ts","index.tsx","app/common/store-reducers.ts","app/robot/store/reducer.ts","app/robot/store/on-startup.ts","app/robot/store/actions.ts","app/common/store.ts"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","getRobotDevice","state","robot","device","getRobotServer","robotDevice","gatt","connected","chunkReducer","chunckSize","currentChunk","accumulator","currentValue","length","push","moveMap","R","R2","F","F2","D","D2","L","L2","B","B2","getGANEncoding","scramble","replace","split","move","reduce","moves","chunkedArr","Uint8Array","executeScramble","robotServer","a","getPrimaryService","scrambleService","getCharacteristic","scrambleExecuteCharacteristic","chunkedValues","console","log","writeValue","setTimeout","GANDeviceTypeError","message","name","requestBluetoothDevice","navigator","bluetooth","requestDevice","filters","namePrefix","optionalServices","connectToGANRobot","connect","server","deviceInfoService","modelCharacteristic","readValue","modelNumberValue","TextDecoder","decode","toUpperCase","ExperimentalFeatureNotSupported","ConnectedRobotWidget","registerRobot","unregisterRobot","props","IconButton","color","onClick","addEventListener","BluetoothConnected","Bluetooth","powers","2","validateAlgorithm","algorithm","test","wideMoves","f","r","u","b","l","d","M","S","E","rotations","x","y","z","normalize","acc","axis","charAt","pow","concat","m","output","totalRotation","i","includes","unshift","j","outputMove","indexOf","parseAlgorithm","returnTotalRotation","result","match","forEach","moveNum","invertAlgorithm","reverse","inv","join","formatAlgorithm","sequence","Math","floor","trim","Centers","Edges","Corners","identity","center","ep","eo","cp","co","allMoves","fiveSideMoves","moveHelper","cube","moveIndex","fn","doCenterMove","newCenter","fromIndex","toIndex","Array","doEdgeMove","newCube","doCornerMove","doMove","doAlgorithm","factorials","factorial","n","binomials","choose","k","s","nextRow","prev","getRandomInt","min","max","random","rotateLeft","pieces","left","right","original","rotateRight","getIndexFromOrientation","flipCount","sum","getOrientationFromIndex","index","numPieces","numFlips","orientation","parity","ori","getParity","getIndexFromPermutation","affected","reversed","offset","position","edges","permutation","getPermutationFromIndex","size","base","binomial","arePiecesPermutated","cubeState","corners","edgeIdx","cornerIdx","arePiecesOriented","arePiecesPermutatedAndOriented","isCrossSolved","isTopCrossSolved","isF2LSolved","isFirstLookOLLSolved","isOLLSolved","isFirstLookPLLSolved","rotation","isCubeSolved","cubeFaces","moveModifiers","generateScramble","total","isSolved","URFToDLF","slice","merge","previousCubeStates","Set","currentState","newState","stateHashCode","getStateHashCode","has","add","cpIndex","coIndex","epIndex","eoIndex","MoveTable","settings","defaultIndex","solvedIndexes","table","this","cubieMove","getVector","getIndex","vector","createMoveHandler","createMoveTable","inverse","createEdgePermutationTable","getCorrectOrientations","numStates","indexes","target","every","piece","createEdgeOrientationTable","createCornerOrientationTable","PruningTable","moveTables","computePruningTable","value","obj","depth","done","permutations","arg","helper","arr","copy","cartesian","data","setPruningValue","find","check","getPruningValue","currentIndex","Search","createTables","initialized","pruningTables","moveTableNames","moveTableIndexes","sort","mappedTables","pruningTable","solution","lastMove","minimumDistance","power","distance","handleSolution","updatedIndexes","search","initialize","maxDepth","format","solutionRotation","formatted","phaseTwoMoves","phaseTwoSearch","getMergeCoord","fiveSideSearch","args","phaseTwoSolution","solve","fiveSideSolver","isArray","solveCube","getEdgeOrientation","enabled","orientLastLayer","fill","getCornerOrientation","getPermutationFromEnabled","getScrambleForPieces","scrambleEdges","scrambleCorners","isScrambleSolved","scrambleState","CrossSearch","crossSolver","centerFacelets","cornerFacelets","edgeFacelets","mod","getFaceletIndex","facelet","Number","getCornerFacelet","cornerIndex","orientationIndex","getEdgeFacelet","edgeIndex","doRotations","rotationAlg","CubePreview","cubeIndexes","scrambleCode","colorMap","defaultColorMap","svgString","options","facelets","centerIndex","corner","faceletIndex","faceletValue","filter","edge","getFaceletArray","faceKey","template","className","dangerouslySetInnerHTML","__html","U","G","ButtonRow","styled","div","attrs","ContentContainer","invertedColorMap","crossFilter","f2lFilter","ollFilter","cross","f2l","firstLookOll","secondLookOll","oll","ConnectedCFOPScramble","useState","cfopPhase","setCFOPPhase","setScramble","FormControl","component","Select","onChange","phase","MenuItem","Button","variant","solveCode","disabled","Boolean","ConnectedRandomScramble","InputLabel","htmlFor","Input","readOnly","multiline","fullWidth","ConnectedManualScramble","hasError","setHasError","noValidate","autoComplete","TextField","label","rowsMax","InputLabelProps","shrink","error","helperText","onBlur","event","manualScrambleValue","fiveSideSolve","fiveSideScramble","Screen","MenuItemContent","CompactMenuItemContent","IconContainer","IconWrapper","MainScreen","React","navigationValue","setNavigation","dispatch","useDispatch","useEffect","Promise","experimentalBluetooth","getDevices","devices","abortController","AbortController","abort","once","watchAdvertisements","signal","AppBar","Toolbar","Typography","Paper","List","ListItem","button","selected","ListItemIcon","Shuffle","ListItemText","primary","Layers","Edit","BottomNavigation","showLabels","newValue","BottomNavigationAction","icon","aria-label","importAll","requireContext","importCache","moduleKey","translations","require","flattenTranslations","trans","key","currentKeys","messageMap","filepath","locale","pathParse","language","messages","toLowerCase","isLocalhost","window","location","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","store","createStore","ReactDOM","render","StylesProvider","injectFirst","document","getElementById","URL","process","href","origin","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker","payloadReducer","action","payload","combineReducers","createReducer","builder","addCase","registerReducer","reducer","actionPrefix","createAction","makeRestartable","rootSaga","reducerRegistry","sagaRegistry","saga","call","delay","spawn","sagaMiddleware","createSagaMiddleware","configureStore","middleware","run"],"mappings":"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","file":"static/js/main.8e498497.chunk.js","sourcesContent":["var map = {\n\t\"./translations/en-us.json\": 130\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 129;","var map = {\n\t\"./app/robot/store/on-startup.ts\": 140\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 135;","var map = {\n\t\"./assets/styles/main.css\": 137,\n\t\"./tailwind.css\": 138\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 136;","import { ApplicationState } from \"app/common/store\";\nimport { RobotState } from \"app/robot/store/types\";\n\nexport const getRobotDevice = (state: ApplicationState): RobotState[\"device\"] =>\n  state.robot.device;\n\nexport const getRobotServer = (\n  state: ApplicationState\n): BluetoothRemoteGATTServer | null => {\n  const robotDevice = getRobotDevice(state);\n  return robotDevice && robotDevice.gatt?.connected ? robotDevice.gatt : null;\n};\n","interface Reducer<T, K> {\n  (acc: T, curr: K): T;\n}\n\nexport const chunkReducer = <T>(\n  chunckSize: number\n): Reducer<Array<Array<T>>, T> => {\n  let currentChunk: Array<T>;\n  return (accumulator: Array<Array<T>>, currentValue: T) => {\n    if (!currentChunk || currentChunk.length === chunckSize) {\n      currentChunk = [];\n      accumulator.push(currentChunk);\n    }\n    currentChunk.push(currentValue);\n    return accumulator;\n  };\n};\n","import { chunkReducer } from \"app/common/array-reducers\";\n\nconst SCRAMBLE_SERVICE_UUID = 0xfff0;\nconst SCRAMBLE_CHARACTERISTIC_UUID = 0xfff3;\n\nconst DEVICE_INFO_SERVICE_UUID = 0x180a;\nconst MODEL_NUMBER_SERVICE_UUID = 0x2a24;\n\nconst moveMap: Record<string, number> = {\n  R: 0,\n  R2: 1,\n  \"R'\": 2,\n  F: 3,\n  F2: 4,\n  \"F'\": 5,\n  D: 6,\n  D2: 7,\n  \"D'\": 8,\n  L: 9,\n  L2: 10,\n  \"L'\": 11,\n  B: 12,\n  B2: 13,\n  \"B'\": 14,\n};\n\nexport function getGANEncoding(scramble: string): Uint8Array[] {\n  return scramble\n    .replace(/(\\w)2/gi, \"$1 $1\") // for some reason the gan robot sometimes fails on double turns, just convert to singles\n    .split(\" \")\n    .map((move) => moveMap[move])\n    .reduce(chunkReducer(2), [])\n    .map((moves) => moves[0] * 16 + (moves[1] ?? 15)) // encode every 2 moves to decimal representation of a hex value\n    .reduce(chunkReducer(16), []) // robot can only take in 18 hex characters, so chunk on this value and do multiple writes if necessary\n    .map((chunkedArr) => new Uint8Array(chunkedArr));\n}\n\nexport const executeScramble = async (\n  robotServer: BluetoothRemoteGATTServer | null,\n  scramble: string\n): Promise<void> => {\n  try {\n    if (robotServer) {\n      const scrambleService = await robotServer.getPrimaryService(\n        SCRAMBLE_SERVICE_UUID\n      );\n      const scrambleExecuteCharacteristic = await scrambleService.getCharacteristic(\n        SCRAMBLE_CHARACTERISTIC_UUID\n      );\n\n      const chunkedValues = getGANEncoding(scramble);\n      console.log(chunkedValues);\n      await scrambleExecuteCharacteristic.writeValue(chunkedValues[0]);\n      if (chunkedValues[1]) {\n        // FIXME this is a dirty hack, really we need to be polling robot\n        // every 50 ms to see if the last chunk has finished\n        setTimeout(\n          () => scrambleExecuteCharacteristic.writeValue(chunkedValues[1]),\n          5000\n        );\n      }\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// const executeScrambleChunk = (\n//   chunkedValue: Uint8Array,\n//   scrambleCharacteristic: BluetoothRemoteGATTCharacteristic\n// ) => {\n\n// };\n\nexport class GANDeviceTypeError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"GANDeviceTypeError\";\n  }\n}\n\nexport const requestBluetoothDevice = async (): Promise<BluetoothDevice> => {\n  const device = await navigator.bluetooth.requestDevice({\n    filters: [{ namePrefix: \"GAN-\" }],\n    optionalServices: [SCRAMBLE_SERVICE_UUID, DEVICE_INFO_SERVICE_UUID],\n  });\n  await connectToGANRobot(device);\n  return device;\n};\n\nconst connectToGANRobot = async (\n  device: ExperimentalBluetoothDevice\n): Promise<void> => {\n  const server = await device.gatt?.connect();\n  if (!server) {\n    throw new Error(\"Could not connect to Bluetooth Server\");\n  }\n  const deviceInfoService = await server.getPrimaryService(\n    DEVICE_INFO_SERVICE_UUID\n  );\n  const modelCharacteristic = await deviceInfoService.getCharacteristic(\n    MODEL_NUMBER_SERVICE_UUID\n  );\n  const modelNumberValue = await modelCharacteristic.readValue();\n  const modelNumber = new TextDecoder().decode(modelNumberValue);\n  if (modelNumber.toUpperCase() !== \"GAN ROBOTCUBE\") {\n    throw new GANDeviceTypeError(\"Requested device is not a GAN Robot\");\n  }\n};\n\ninterface ExperimentalBluetoothDevice\n  extends Omit<BluetoothDevice, \"addEventListener\"> {\n  watchAdvertisements: (options?: { signal: AbortSignal }) => Promise<void>;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    useCapture?: boolean | { once: boolean }\n  ): void;\n}\n\ninterface ExperimentalBluetooth extends Bluetooth {\n  getDevices?: () => ExperimentalBluetoothDevice[];\n}\n\nexport class ExperimentalFeatureNotSupported extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"ExperimentalFeatureNotSupported\";\n  }\n}\n\nexport const connectToKnownGANRobots = (): Promise<\n  ExperimentalBluetoothDevice\n> => {\n  return new Promise(async (resolve) => {\n    const experimentalBluetooth = navigator.bluetooth as ExperimentalBluetooth;\n    if (!experimentalBluetooth.getDevices) {\n      throw new ExperimentalFeatureNotSupported(\"getDevices not supported\");\n    }\n    const devices = await experimentalBluetooth.getDevices();\n    for (const device of devices) {\n      const abortController = new AbortController();\n      device.addEventListener(\n        \"advertisementreceived\",\n        async () => {\n          abortController.abort();\n          await connectToGANRobot(device);\n          resolve(device);\n        },\n        { once: true }\n      );\n      await device.watchAdvertisements({ signal: abortController.signal });\n    }\n  });\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { IconButton } from \"@material-ui/core\";\nimport { BluetoothConnected, Bluetooth } from \"@material-ui/icons\";\n\nimport { ApplicationState } from \"app/common/store\";\n\nimport { unregisterRobot, registerRobot } from \"app/robot/store/actions\";\nimport { getRobotDevice } from \"app/robot/store/selectors\";\nimport { RobotState } from \"app/robot/store/types\";\nimport {\n  requestBluetoothDevice,\n  GANDeviceTypeError,\n} from \"app/robot/bluetooth-utils\";\n\ninterface RobotWidgetProps {\n  registerRobot: typeof registerRobot;\n  unregisterRobot: typeof unregisterRobot;\n  robotDevice?: RobotState[\"device\"];\n}\n\nexport function RobotWidget(props: RobotWidgetProps): JSX.Element {\n  // TODO pull callback into useCallback hook\n  // TODO pull async with dispatch into a saga\n  return (\n    <IconButton\n      color=\"inherit\"\n      onClick={async () => {\n        try {\n          const device = await requestBluetoothDevice();\n          props.registerRobot(device);\n          device.addEventListener(\"gattserverdisconnected\", () =>\n            props.unregisterRobot()\n          );\n        } catch (error) {\n          if (error instanceof GANDeviceTypeError) {\n            // TODO show toast for trying to connect to incorrect GAN device\n          } else {\n            // TODO show toast for other errors\n          }\n          console.log(error);\n        }\n      }}\n    >\n      {props.robotDevice ? <BluetoothConnected /> : <Bluetooth />}\n    </IconButton>\n  );\n}\n\nexport const ConnectedRobotWidget = connect(\n  (state: ApplicationState) => ({\n    robotDevice: getRobotDevice(state),\n  }),\n  {\n    registerRobot,\n    unregisterRobot,\n  }\n)(RobotWidget);\n","// Numeric representation of the different powers of moves.\nconst powers: Record<string, number> = {\n  \"\": 0,\n  2: 1,\n  \"'\": 2,\n};\n\n/**\n * Check whether or not we are able to parse the given algorithm string.\n */\nexport const validateAlgorithm = (algorithm: string): boolean =>\n  /^([FRUBLDfrubldxyzMSE][2']?\\s*)+$/.test(algorithm);\n\n// Map single-power wide moves to a rotation + moves.\nconst wideMoves: Record<string, string[]> = {\n  f: [\"z\", \"B\"],\n  r: [\"x\", \"L\"],\n  u: [\"y\", \"D\"],\n  b: [\"z'\", \"F\"],\n  l: [\"x'\", \"R\"],\n  d: [\"y'\", \"U\"],\n  M: [\"x'\", \"R\", \"L'\"],\n  S: [\"z\", \"F'\", \"B\"],\n  E: [\"y'\", \"U\", \"D'\"],\n};\n\n// Specifies the translation of FRUBLD as performed by rotations.\nconst rotations: Record<string, string> = {\n  x: \"DRFULB\",\n  y: \"RBULFD\",\n  z: \"FULBDR\",\n};\n\n/**\n * Strip rotations and wide moves from an algorithm. Returns\n * an array of moves as strings.\n */\nconst normalize = (moves: string[]) => {\n  // Replace wide moves with rotations + moves.\n  moves = moves.reduce((acc: string[], move: string) => {\n    const axis: keyof typeof wideMoves = move.charAt(0);\n    const pow = move.charAt(1);\n\n    if (wideMoves[axis]) {\n      return acc.concat(wideMoves[axis].map((m) => m + pow));\n    }\n\n    return acc.concat(move);\n  }, []);\n\n  let output: string[] = [];\n\n  // We store all rotations that were encountered, to map the\n  // solution to the same final rotation as the scramble.\n  const totalRotation: string[] = [];\n\n  // Remove rotations by mapping all moves to the right of the rotation.\n  for (let i = moves.length - 1; i >= 0; i -= 1) {\n    const axis = moves[i].charAt(0);\n    const pow = powers[moves[i].charAt(1)];\n\n    if (\"xyz\".includes(axis)) {\n      totalRotation.unshift(moves[i]);\n\n      for (let j = 0; j <= pow; j += 1) {\n        output = output.map(\n          (outputMove) =>\n            rotations[axis][\"FRUBLD\".indexOf(outputMove[0])] +\n            outputMove.charAt(1)\n        );\n      }\n    } else {\n      output.unshift(moves[i]);\n    }\n  }\n\n  return [output, totalRotation];\n};\n\n/**\n * Parses a scramble, returning an array of integers describing the moves.\n */\nexport function parseAlgorithm(algorithm: string): number[];\nexport function parseAlgorithm(\n  algorithm: string,\n  returnTotalRotation: boolean\n): [number[], string[]];\nexport function parseAlgorithm(\n  algorithm: string,\n  returnTotalRotation = false\n): number[] | [number[], string[]] {\n  if (!validateAlgorithm(algorithm)) {\n    throw new Error(\"Invalid algorithm provided to algorithm parser\");\n  }\n\n  const result: number[] = [];\n\n  const [moves, totalRotation] = normalize(\n    algorithm.match(/[FRUBLDfrubldxyzMSE][2']?/g) || []\n  );\n\n  moves.forEach((move) => {\n    const moveNum = \"FRUBLD\".indexOf(move.charAt(0));\n    const pow = powers[move.charAt(1)];\n    result.push(moveNum * 3 + pow);\n  });\n\n  if (returnTotalRotation) {\n    return [result, totalRotation];\n  }\n\n  return result;\n}\n\n/**\n * Computes the inverse of a given algorithm. Rotations are supported.\n */\nexport const invertAlgorithm = (algorithm: string): string => {\n  if (!validateAlgorithm(algorithm)) {\n    throw new Error(\"Invalid algorithm provided to algorithm parser\");\n  }\n\n  const moves = algorithm.match(/[FRUBLDfrubldxyzMSE][2']?/g) || [];\n\n  const inverted = moves.reverse().map((move) => {\n    const axis = move.charAt(0);\n    const pow = powers[move.charAt(1)];\n    const inv = pow - 2 * (pow % 3) + 2;\n\n    if (inv === 1) {\n      return `${axis}2`;\n    }\n\n    if (inv === 2) {\n      return `${axis}'`;\n    }\n\n    return axis;\n  });\n\n  return inverted.join(\" \");\n};\n\n/**\n * Convert an array of integers to a human-readable representation.\n */\nexport const formatAlgorithm = (moves: number[]): string => {\n  let sequence = \"\";\n\n  moves.forEach((move) => {\n    sequence += \" \";\n    sequence += \"FRUBLD\".charAt(Math.floor(move / 3));\n\n    switch (move % 3) {\n      case 1:\n        sequence += \"2\";\n        break;\n\n      case 2:\n        sequence += \"'\";\n        break;\n\n      default:\n    }\n  });\n\n  // Trim extra spaces.\n  return sequence.trim();\n};\n","import { parseAlgorithm } from \"./algorithms\";\n\nexport const Centers = {\n  U: 0,\n  R: 1,\n  F: 2,\n  D: 3,\n  L: 4,\n  B: 5,\n};\n\nexport const Edges = {\n  UR: 0,\n  UF: 1,\n  UL: 2,\n  UB: 3,\n  DR: 4,\n  DF: 5,\n  DL: 6,\n  DB: 7,\n  FR: 8,\n  FL: 9,\n  BL: 10,\n  BR: 11,\n};\n\nexport const Corners = {\n  URF: 0,\n  UFL: 1,\n  ULB: 2,\n  UBR: 3,\n  DFR: 4,\n  DLF: 5,\n  DBL: 6,\n  DBR: 7,\n};\n\nconst { F, R, U, B, L, D } = Centers;\nconst { UR, UF, UL, UB, DR, DF, DL, DB, FR, FL, BL, BR } = Edges;\nconst { URF, UFL, ULB, UBR, DFR, DLF, DBL, DBR } = Corners;\n\nexport interface CubeIndexes {\n  center: number[];\n  ep: number[];\n  eo: number[];\n  cp: number[];\n  co: number[];\n}\n\n// The identity cube.\nexport const identity: CubeIndexes = {\n  center: [0, 1, 2, 3, 4, 5],\n  ep: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n  eo: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  cp: [0, 1, 2, 3, 4, 5, 6, 7],\n  co: [0, 0, 0, 0, 0, 0, 0, 0],\n};\n\nexport const moves = [\n  // F\n  {\n    center: identity.center,\n    cp: [UFL, DLF, 2, 3, URF, DFR, 6, 7],\n    co: [1, 2, 0, 0, 2, 1, 0, 0],\n    ep: [0, FL, 2, 3, 4, FR, 6, 7, UF, DF, 10, 11],\n    eo: [0, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0],\n  },\n\n  // R\n  {\n    center: identity.center,\n    cp: [DFR, 1, 2, URF, DBR, 5, 6, UBR],\n    co: [2, 0, 0, 1, 1, 0, 0, 2],\n    ep: [FR, 1, 2, 3, BR, 5, 6, 7, DR, 9, 10, UR],\n    eo: identity.eo,\n  },\n\n  // U\n  {\n    center: identity.center,\n    cp: [UBR, URF, UFL, ULB, 4, 5, 6, 7],\n    co: identity.co,\n    ep: [UB, UR, UF, UL, 4, 5, 6, 7, 8, 9, 10, 11],\n    eo: identity.eo,\n  },\n\n  // B\n  {\n    center: identity.center,\n    cp: [0, 1, UBR, DBR, 4, 5, ULB, DBL],\n    co: [0, 0, 1, 2, 0, 0, 2, 1],\n    ep: [0, 1, 2, BR, 4, 5, 6, BL, 8, 9, UB, DB],\n    eo: [0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 1],\n  },\n\n  // L\n  {\n    center: identity.center,\n    cp: [0, ULB, DBL, 3, 4, UFL, DLF, 7],\n    co: [0, 1, 2, 0, 0, 2, 1, 0],\n    ep: [0, 1, BL, 3, 4, 5, FL, 7, 8, UL, DL, 11],\n    eo: identity.eo,\n  },\n\n  // D\n  {\n    center: identity.center,\n    cp: [0, 1, 2, 3, DLF, DBL, DBR, DFR],\n    co: identity.co,\n    ep: [0, 1, 2, 3, DF, DL, DB, DR, 8, 9, 10, 11],\n    eo: identity.eo,\n  },\n\n  // E\n  {\n    center: [0, F, L, 3, B, R],\n    cp: identity.cp,\n    co: identity.co,\n    ep: [0, 1, 2, 3, 4, 5, 6, 7, FL, BL, BR, FR],\n    eo: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],\n  },\n\n  // M\n  {\n    center: [B, 1, U, F, 4, D],\n    cp: identity.cp,\n    co: identity.co,\n    ep: [0, UB, 2, DB, 4, UF, 6, DF, 8, 9, 10, 11],\n    eo: [0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],\n  },\n\n  // S\n  {\n    center: [L, U, 2, R, D, 5],\n    cp: identity.cp,\n    co: identity.co,\n    ep: [UL, 1, DL, 3, UR, 5, DR, 7, 8, 9, 10, 11],\n    eo: [1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0],\n  },\n];\n\nexport const allMoves = [\n  0, // F\n  1,\n  2,\n  3, // R\n  4,\n  5,\n  6, // U\n  7,\n  8,\n  9, // B\n  10,\n  11,\n  12, // L\n  13,\n  14,\n  15, // D\n  16,\n  17,\n];\n\nexport const fiveSideMoves = [\n  3,\n  4,\n  5,\n  6,\n  7,\n  8,\n  9,\n  10,\n  11,\n  12,\n  13,\n  14,\n  15,\n  16,\n  17,\n];\n\nexport const moveHelper = <T>(\n  cube: T,\n  moveIndex: number,\n  fn: (cube: T, move: CubeIndexes) => T\n): T => {\n  const move = moves[Math.floor(moveIndex / 3)];\n  const pow = (moveIndex % 3) + 1;\n  for (let i = 0; i < pow; i++) {\n    cube = fn(cube, move);\n  }\n  return cube;\n};\n\nexport const doCenterMove = (center: number[], move: CubeIndexes): number[] =>\n  move.center === identity.center\n    ? move.center\n    : move.center.reduce((newCenter, fromIndex, toIndex) => {\n        newCenter[toIndex] = center[fromIndex];\n        return newCenter;\n      }, new Array(6));\n\nexport const doEdgeMove = (\n  cube: Pick<CubeIndexes, \"eo\" | \"ep\">,\n  move: CubeIndexes\n): typeof cube =>\n  move.ep.reduce(\n    (newCube, fromIndex, toIndex) => {\n      newCube.ep[toIndex] = cube.ep[fromIndex];\n      newCube.eo[toIndex] = (cube.eo[fromIndex] + move.eo[toIndex]) % 2;\n      return newCube;\n    },\n    {\n      ep: new Array(12),\n      eo: new Array(12),\n    }\n  );\n\nexport const doCornerMove = (\n  cube: Pick<CubeIndexes, \"co\" | \"cp\">,\n  move: CubeIndexes\n): typeof cube =>\n  move.cp.reduce(\n    (newCube, fromIndex, toIndex) => {\n      newCube.cp[toIndex] = cube.cp[fromIndex];\n      newCube.co[toIndex] = (cube.co[fromIndex] + move.co[toIndex]) % 3;\n      return newCube;\n    },\n    {\n      cp: new Array(8),\n      co: new Array(8),\n    }\n  );\n\nexport const doMove = (cube: CubeIndexes, moveIndex: number): CubeIndexes => {\n  return {\n    ...moveHelper(cube, moveIndex, doCornerMove),\n    ...moveHelper(cube, moveIndex, doEdgeMove),\n    center: moveHelper(cube.center, moveIndex, doCenterMove),\n  };\n};\n\nexport const doAlgorithm = (algorithm: string, cube = identity): CubeIndexes =>\n  !algorithm ? cube : parseAlgorithm(algorithm).reduce(doMove, cube);\n","const factorials: number[] = [];\n\n/**\n * Calculates n factorial and attempts to cache\n * as much information as possible.\n */\nexport const factorial = (n: number): number => {\n  if (n === 0 || n === 1) {\n    return 1;\n  }\n\n  if (factorials[n] > 0) {\n    return factorials[n];\n  }\n\n  factorials[n] = factorial(n - 1) * n;\n\n  return factorials[n];\n};\n\nconst binomials: number[][] = [];\n\n/**\n * Calculates n choose k using cached binomial numbers.\n */\nexport const choose = (n: number, k: number): number => {\n  if (k > n) {\n    return 0;\n  }\n\n  while (n >= binomials.length) {\n    const s = binomials.length;\n    const nextRow = [];\n\n    nextRow[0] = 1;\n\n    for (let i = 1, prev = s - 1; i < s; i += 1) {\n      nextRow[i] = binomials[prev][i - 1] + binomials[prev][i];\n    }\n\n    nextRow[s] = 1;\n\n    binomials.push(nextRow);\n  }\n\n  return binomials[n][k];\n};\n\n/**\n * Cartesian product of a given nested array.\n */\nexport const cartesian = (arg: number[][]): number[][] => {\n  const result: number[][] = [];\n  const max = arg.length - 1;\n\n  const helper = (arr: number[], i: number) => {\n    for (let j = 0; j < arg[i].length; j += 1) {\n      const copy = arr.slice(0);\n\n      copy.push(arg[i][j]);\n\n      if (i === max) {\n        result.push(copy);\n      } else {\n        helper(copy, i + 1);\n      }\n    }\n  };\n\n  helper([], 0);\n\n  return result;\n};\n\n// Ger a random integer in the provided range, inclusive.\nexport const getRandomInt = (min: number, max: number): number =>\n  Math.floor(Math.random() * (max - min + 1)) + min;\n\nexport const permute = (n: number, r: number): number =>\n  factorial(n) / factorial(n - r);\n\n/**\n * Rotates the subarray containing the affected pieces\n * to the right by one.\n */\nexport const rotateParts = (pieces: number[], affected: number[]): number[] => {\n  const updatedPieces = pieces.slice(0);\n\n  updatedPieces[affected[0]] = pieces[affected[affected.length - 1]];\n\n  for (let i = 1; i < affected.length; i += 1) {\n    updatedPieces[affected[i]] = pieces[affected[i - 1]];\n  }\n\n  return updatedPieces;\n};\n","import { factorial, choose } from \"app/common/cube/libs/tools\";\n\n/**\n * In-place rotation of the subarray determined by the two\n * indexes left and right to the left by one.\n */\nconst rotateLeft = (pieces: number[], left: number, right: number): void => {\n  const original = pieces[left];\n\n  for (let i = left; i < right; i += 1) {\n    pieces[i] = pieces[i + 1];\n  }\n\n  pieces[right] = original;\n};\n\n/**\n * In-place rotation of the subarray determined by the two\n * indexes left and right to the right by one.\n */\nconst rotateRight = (pieces: number[], left: number, right: number): void => {\n  const original = pieces[right];\n\n  for (let i = right; i > left; i -= 1) {\n    pieces[i] = pieces[i - 1];\n  }\n\n  pieces[left] = original;\n};\n\n/**\n * Bijection which encodes a given orientation vector to an unique index.\n * The flip count is the number of ways in which a single piece in the\n * orientation vector may be oriented. For edges, this number is 2 flips,\n * and for corners there are 3 possible twists. Thus, edges are encoded\n * using a binary number system, and corners using a trinary number system.\n */\nexport const getIndexFromOrientation = (\n  pieces: number[],\n  flipCount: number\n): number => {\n  let sum = 0;\n\n  // Note that we do not include the last element in the vector here.\n  // This is because the orientation of the last piece if determined\n  // by the orientation of all the other pieces - when you rotate any\n  // axis on the cube, only an even number of pieces is affected.\n  for (let i = 0; i < pieces.length - 1; i += 1) {\n    sum = flipCount * sum + pieces[i];\n  }\n\n  return sum;\n};\n\n/**\n * Returns the original orientation vector given the number which\n * describes it, the number of pieces in the vector, and the number\n * of ways in which an individual piece may be oriented.\n */\nexport const getOrientationFromIndex = (\n  index: number,\n  numPieces: number,\n  numFlips: number\n): number[] => {\n  const orientation = [];\n\n  let parity = 0;\n\n  for (let i = numPieces - 2; i >= 0; i -= 1) {\n    const ori = index % numFlips;\n    index = Math.floor(index / numFlips);\n    orientation[i] = ori;\n    parity += ori;\n  }\n\n  // Restore the last piece based on the orientation of the other pieces.\n  orientation[numPieces - 1] = (numFlips - (parity % numFlips)) % numFlips;\n\n  return orientation;\n};\n\n/**\n * Each move on a cube perform an even number of swaps when considering\n * both edges and corner pieces at the same time. Thus, only half of all\n * cube states are reachable using legal moves. This also implies that\n * for a cube to be solvable, the parity of both corners and edges must\n * both be either even or odd. We use this to verify that a cube is\n * solvable when generating random state scrambles, and also to\n * describe the overall cube permutation using only 10 edges, 6 corners\n * and the parity of either the corners or the edges.\n */\nexport const getParity = (pieces: number[]): number => {\n  let sum = 0;\n\n  for (let i = pieces.length - 1; i > 0; i -= 1) {\n    for (let j = i - 1; j >= 0; j -= 1) {\n      if (pieces[j] > pieces[i]) {\n        sum += 1;\n      }\n    }\n  }\n\n  return sum % 2;\n};\n\n/**\n * Encodes the permutation of the affected pieces within the entire\n * permutation vector, by encoding both their position and then the\n * permutation of the affected pieces within the permutation vector\n * using a variable-base number system. If reversed is true, the\n * values are assigned right-to-left. This is used in the Kociemba\n * solver, so that 0 is used as the solved coordinate for the move\n * table describing the UD-slice edges.\n */\nexport const getIndexFromPermutation = (\n  pieces: number[],\n  affected: number[],\n  reversed = false\n): number => {\n  let offset = pieces.length - 1;\n  let position = 0;\n  let k = 1;\n\n  // Store the permutation of the subarray containing\n  // only the affected pieces.\n  const edges = [];\n\n  // Encode the position of the affected pieces in a number\n  // from 0 up to n choose k, where n is the number of pieces\n  // in the permutation vector and k is the number of affected pieces.\n  if (reversed) {\n    for (let n = pieces.length - 1; n >= 0; n -= 1) {\n      if (affected.indexOf(pieces[n]) >= 0) {\n        offset = Math.min(offset, pieces[n]);\n        position += choose(pieces.length - 1 - n, k);\n        edges.unshift(pieces[n]);\n        k += 1;\n      }\n    }\n  } else {\n    for (let n = 0; n < pieces.length; n += 1) {\n      if (affected.indexOf(pieces[n]) >= 0) {\n        offset = Math.min(offset, pieces[n]);\n        position += choose(n, k);\n        edges.push(pieces[n]);\n        k += 1;\n      }\n    }\n  }\n\n  let permutation = 0;\n\n  // Encode the position of the subarray as a number from 0 and up\n  // to n factorial, where n is the number of affected pieces.\n  for (let i = edges.length - 1; i > 0; i -= 1) {\n    let s = 0;\n\n    while (edges[i] !== affected[i]) {\n      rotateLeft(edges, 0, i);\n      s += 1;\n    }\n\n    permutation = (i + 1) * permutation + s;\n  }\n\n  // Encode both the position and the permutation\n  // as a number using a variable base.\n  return factorial(affected.length) * position + permutation;\n};\n\n/**\n * Restores the permutation described by an index, number of affected\n * pieces and the permutation vector size. If reversed is true, the\n * indexes have been assigned right-to-left.\n */\nexport const getPermutationFromIndex = (\n  index: number,\n  affected: number[],\n  size: number,\n  reversed = false\n): number[] => {\n  const base = factorial(affected.length);\n\n  let position = Math.floor(index / base);\n  let permutation = index % base;\n\n  const pieces = [];\n\n  for (let i = 0; i < size; i += 1) {\n    pieces.push(-1);\n  }\n\n  for (let i = 1; i < affected.length; i += 1) {\n    let s = permutation % (i + 1);\n    permutation = Math.floor(permutation / (i + 1));\n\n    while (s > 0) {\n      rotateRight(affected, 0, i);\n      s -= 1;\n    }\n  }\n\n  let k = affected.length - 1;\n\n  if (reversed) {\n    for (let n = 0; n < size; n += 1) {\n      const binomial = choose(size - 1 - n, k + 1);\n\n      if (position - binomial >= 0) {\n        pieces[n] = affected[affected.length - 1 - k];\n        position -= binomial;\n        k -= 1;\n      }\n    }\n  } else {\n    for (let n = size - 1; n >= 0; n -= 1) {\n      const binomial = choose(n, k + 1);\n\n      if (position - binomial >= 0) {\n        pieces[n] = affected[k];\n        position -= binomial;\n        k -= 1;\n      }\n    }\n  }\n\n  return pieces;\n};\n","import {\n  CubeIndexes,\n  Corners,\n  Edges,\n  doAlgorithm,\n} from \"app/common/cube/libs/cube\";\n\nconst arePiecesPermutated = (\n  cubeState: CubeIndexes,\n  edges: number[],\n  corners: number[]\n) => {\n  for (const edgeIdx of edges)\n    if (cubeState.ep[edgeIdx] !== edgeIdx) return false;\n  for (const cornerIdx of corners)\n    if (cubeState.cp[cornerIdx] !== cornerIdx) return false;\n  return true;\n};\n\nconst arePiecesOriented = (\n  cubeState: CubeIndexes,\n  edges: number[],\n  corners: number[]\n) => {\n  for (const edgeIdx of edges) if (cubeState.eo[edgeIdx] !== 0) return false;\n  for (const cornerIdx of corners)\n    if (cubeState.co[cornerIdx] !== 0) return false;\n  return true;\n};\n\nconst arePiecesPermutatedAndOriented = (\n  cubeState: CubeIndexes,\n  edges: number[],\n  corners: number[]\n) =>\n  arePiecesOriented(cubeState, edges, corners) &&\n  arePiecesPermutated(cubeState, edges, corners);\n\nexport const isCrossSolved = (cubeState: CubeIndexes): boolean =>\n  arePiecesPermutatedAndOriented(\n    cubeState,\n    [Edges.DB, Edges.DF, Edges.DL, Edges.DR],\n    []\n  );\n\nexport const isTopCrossSolved = (cubeState: CubeIndexes): boolean =>\n  arePiecesPermutatedAndOriented(\n    cubeState,\n    [Edges.DB, Edges.DF, Edges.DL, Edges.DR],\n    []\n  );\n\nexport const isF2LSolved = (cubeState: CubeIndexes): boolean =>\n  isCrossSolved(cubeState) &&\n  arePiecesPermutatedAndOriented(\n    cubeState,\n    [Edges.BL, Edges.BR, Edges.FL, Edges.FR],\n    [Corners.DBL, Corners.DBR, Corners.DFR, Corners.DLF]\n  );\n\nexport const isFirstLookOLLSolved = (cubeState: CubeIndexes): boolean =>\n  isF2LSolved(cubeState) &&\n  arePiecesOriented(cubeState, [Edges.UB, Edges.UF, Edges.UL, Edges.UR], []);\n\nexport const isOLLSolved = (cubeState: CubeIndexes): boolean =>\n  isF2LSolved(cubeState) &&\n  arePiecesOriented(\n    cubeState,\n    [Edges.UB, Edges.UF, Edges.UL, Edges.UR],\n    [Corners.UBR, Corners.UFL, Corners.ULB, Corners.URF]\n  );\n\nexport const isFirstLookPLLSolved = (cubeState: CubeIndexes): boolean => {\n  let rotation = 0;\n  do {\n    if (\n      isOLLSolved(cubeState) &&\n      arePiecesPermutated(\n        cubeState,\n        [],\n        [Corners.UBR, Corners.UFL, Corners.ULB, Corners.URF]\n      )\n    )\n      return true;\n    cubeState = doAlgorithm(\"U\", cubeState);\n    rotation += 90;\n  } while (rotation < 360);\n  return false;\n};\n\nexport const isCubeSolved = (cubeState: CubeIndexes): boolean =>\n  isF2LSolved(cubeState) &&\n  arePiecesPermutatedAndOriented(\n    cubeState,\n    [Edges.UB, Edges.UF, Edges.UL, Edges.UR],\n    [Corners.UBR, Corners.UFL, Corners.ULB, Corners.URF]\n  );\n","import { doAlgorithm, identity, CubeIndexes } from \"app/common/cube/libs/cube\";\nimport {\n  getIndexFromOrientation,\n  getIndexFromPermutation,\n} from \"app/common/cube/libs/coordinates\";\nimport { isTopCrossSolved } from \"app/common/cube/scramblers/solve-criteria\";\n\nconst cubeFaces = [\"D\", \"L\", \"B\", \"U\", \"R\", \"F\"];\nconst moveModifiers = [\"\", \"2\", \"'\"];\n\nexport function generateScramble(\n  total = 26,\n  isSolved: (state: CubeIndexes) => boolean = isTopCrossSolved\n): string {\n  return scramble(total, isSolved).join(\" \");\n}\n\nconst scramble = (\n  total: number,\n  isSolved: (state: CubeIndexes) => boolean\n): string[] => {\n  const previousCubeStates = new Set();\n  let currentState = identity;\n  const moves = [];\n\n  while (moves.length < total) {\n    // Generate a random move\n    const move =\n      cubeFaces[Math.floor(Math.random() * 6)] +\n      moveModifiers[Math.floor(Math.random() * 3)];\n    if (move.charAt(0) === \"U\") {\n      continue;\n    }\n    // Don't move the same face twice in a row\n    if (\n      moves.length > 0 &&\n      move.charAt(0) === moves[moves.length - 1].charAt(0)\n    ) {\n      continue;\n    }\n    // Avoid move sequences like \"R L R\", which is the same as \"R2 L\"\n    if (\n      moves.length > 1 &&\n      move.charAt(0) === moves[moves.length - 2].charAt(0) &&\n      moves[moves.length - 1].charAt(0) ===\n        cubeFaces[(cubeFaces.indexOf(move.charAt(0)) + 3) % 6]\n    ) {\n      continue;\n    }\n\n    // ensure state has not been repeated earlier in the scramble\n    const newState = doAlgorithm(move, currentState);\n    const stateHashCode = getStateHashCode(newState);\n    if (!previousCubeStates.has(stateHashCode)) {\n      moves.push(move);\n      previousCubeStates.add(stateHashCode);\n      currentState = newState;\n    }\n  }\n  return isSolved(currentState) ? scramble(total, isSolved) : moves;\n};\n\nconst getStateHashCode = (cubeState: CubeIndexes) => {\n  const cpIndex = getIndexFromPermutation(cubeState.cp, identity.cp);\n  const coIndex = getIndexFromOrientation(cubeState.co, 3);\n  const epIndex = getIndexFromPermutation(cubeState.ep, identity.ep);\n  const eoIndex = getIndexFromOrientation(cubeState.co, 2);\n  return `${cpIndex}:${coIndex}:${epIndex}:${eoIndex}`;\n};\n","import {\n  getIndexFromPermutation,\n  getPermutationFromIndex,\n  getIndexFromOrientation,\n  getParity,\n} from \"app/common/cube/libs/coordinates\";\n\nimport {\n  MoveTable,\n  createEdgePermutationTable,\n  createCornerPermutationTable,\n  createEdgeOrientationTable,\n  createCornerOrientationTable,\n} from \"app/common/cube/libs/move-table\";\n\nimport Search, { SearchSolution } from \"app/common/cube/libs/search\";\n\nimport { fiveSideMoves, CubeIndexes } from \"app/common/cube/libs/cube\";\n\n// In phase two, only quarter moves of U and D and double turns of\n// all the other faces are allowed, in order to keep the cube in\n// the phase two group G1.\nconst phaseTwoMoves = [10, 4, 13, 6, 7, 8, 15, 16, 17];\n\n// The following tables are being used in both phases.\nlet parity: MoveTable;\nlet URFToDLF: MoveTable;\nlet slice: MoveTable;\nlet merge: number[][];\n\nconst phaseTwoSearch = new Search(() => {\n  // In order to start phase two, we need to know the positions\n  // in which the pieces landed after solving the cube into G1.\n  // Since returning to the cubie level to perform the solution\n  // would be slow, we use two helper tables in phase one which\n  // later are merged into the final phase two coordinate.\n  const getMergeCoord = (x: number, y: number) => {\n    const a = getPermutationFromIndex(x, [0, 1, 2], 12);\n    const b = getPermutationFromIndex(y, [3, 4, 5], 12);\n\n    for (let i = 0; i < 8; i += 1) {\n      if (a[i] !== -1) {\n        if (b[i] !== -1) {\n          return -1;\n        }\n        b[i] = a[i];\n      }\n    }\n\n    return getIndexFromPermutation(b, [0, 1, 2, 3, 4, 5]);\n  };\n\n  merge = [];\n\n  // Due to the sorted nature of our coordinate definitions, the\n  // index of both the coordinates will be less than 336 when phase\n  // one is finished. This allows for a pretty small merging table.\n  for (let i = 0; i < 336; i += 1) {\n    merge.push([]);\n\n    for (let j = 0; j < 336; j += 1) {\n      merge[i][j] = getMergeCoord(i, j);\n    }\n  }\n\n  return {\n    moveTables: [\n      // The permutation of the slice pices, which already\n      // are in the correct positions on the cube.\n      new MoveTable({\n        name: \"slicePermutation\",\n        size: 24,\n        table: slice.table,\n      }),\n\n      parity,\n      URFToDLF,\n\n      createEdgePermutationTable({\n        name: \"URToDF\",\n        size: 20160,\n        moves: phaseTwoMoves,\n        affected: [0, 1, 2, 3, 4, 5],\n      }),\n    ],\n\n    pruningTables: [\n      [\"slicePermutation\", \"parity\", \"URFToDLF\"],\n      [\"slicePermutation\", \"parity\", \"URToDF\"],\n    ],\n  };\n}, phaseTwoMoves);\n\nclass TwoPhaseSearch extends Search {\n  maxDepth: number;\n  solution: number[];\n\n  constructor(...args: ConstructorParameters<typeof Search>) {\n    super(...args);\n\n    this.maxDepth = 40;\n    this.solution = [];\n  }\n\n  handleSolution(\n    solution: number[],\n    indexes: number[]\n  ): SearchSolution | false {\n    const lastMove = solution.slice(-1)[0];\n\n    // We do not allow solutions which end in a phase two move, as we then\n    // would end up duplicating work.\n    if (\n      lastMove % 2 === 0 &&\n      Math.floor(lastMove / 3) === 6 &&\n      Math.floor(lastMove / 3) === 15\n    ) {\n      return false;\n    }\n\n    const phaseTwoSolution = phaseTwoSearch.solve({\n      indexes: [\n        indexes[3],\n        indexes[4],\n        indexes[5],\n        merge[indexes[6]][indexes[7]],\n      ],\n      maxDepth: this.maxDepth - solution.length,\n      lastMove,\n      format: false,\n    });\n\n    if (phaseTwoSolution) {\n      this.solution = solution.concat(phaseTwoSolution.solution);\n\n      if (this.maxDepth <= this.settings.maxDepth) {\n        return {\n          solution: this.solution,\n          indexes,\n        };\n      }\n\n      this.maxDepth = this.solution.length - 1;\n    }\n\n    return false;\n  }\n}\n\nexport const fiveSideSearch = new TwoPhaseSearch(() => {\n  // The parity move table is so small that we inline it. It\n  // describes the parity of both the edge and corner pieces,\n  // which must be equal for the cube to be solvable. The\n  // coordinate is included in both phases, but only used\n  // in phase two.\n  parity = new MoveTable({\n    name: \"parity\",\n\n    size: 2,\n\n    table: [\n      [1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1],\n      [0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0],\n    ],\n  });\n\n  URFToDLF = createCornerPermutationTable({\n    name: \"URFToDLF\",\n    affected: [0, 1, 2, 3, 4, 5],\n  });\n\n  // This table is not used directly. This coordinate modulo 24 gives the\n  // permutation of the subarray containing the UD-slice pieces, while this\n  // coordinate divided by 24 gives the position of the UD-slice pieces.\n  // Two smaller move tables are created using this table, one to solve the\n  // position of the UD-slice pieces in phase one, and one to solve the\n  // pieces in phase two. Due to the reduced move set in phase two, the pruning\n  // table for this coordinate is smaller than it would normally be.\n  slice = createEdgePermutationTable({\n    name: \"slice\",\n    affected: [8, 9, 10, 11],\n    reversed: true,\n  });\n\n  // Initialize phase two, since it now is guaranteed that the\n  // heper move tables have finished generating.\n  phaseTwoSearch.initialize();\n\n  return {\n    moveTables: [\n      new MoveTable({\n        // The position of the slice edges. When this coordinate is\n        // solved, the UD-slice pieces are in the UD-slice, but they\n        // are not necessarily permuted.\n        name: \"slicePosition\",\n        size: 495,\n        table: slice.table,\n        doMove: (table, index, move) =>\n          Math.floor(table[index * 24][move] / 24),\n      }),\n\n      createCornerOrientationTable({\n        name: \"twist\",\n        affected: [0, 1, 2, 3, 4, 5, 6, 7],\n      }),\n\n      createEdgeOrientationTable({\n        name: \"flip\",\n        affected: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n      }),\n\n      slice,\n      parity,\n      URFToDLF,\n\n      createEdgePermutationTable({\n        name: \"URToUL\",\n        affected: [0, 1, 2],\n      }),\n\n      createEdgePermutationTable({\n        name: \"UBToDF\",\n        affected: [3, 4, 5],\n      }),\n    ],\n\n    pruningTables: [\n      [\"slicePosition\", \"flip\"],\n      [\"slicePosition\", \"twist\"],\n    ],\n  };\n}, fiveSideMoves);\n\nexport const fiveSideSolver = (\n  scramble: string | number[],\n  maxDepth = 40\n): false | string => {\n  if (Array.isArray(scramble)) {\n    return fiveSideSearch.solve({\n      indexes: scramble,\n      maxDepth,\n    });\n  }\n\n  return fiveSideSearch.solve({\n    scramble,\n    maxDepth,\n  });\n};\n\nexport const solveCube = (\n  cubeState: CubeIndexes\n): ReturnType<typeof fiveSideSolver> =>\n  fiveSideSolver([\n    Math.floor(\n      getIndexFromPermutation(cubeState.ep, [8, 9, 10, 11], true) / 24\n    ),\n    getIndexFromOrientation(cubeState.co, 3),\n    getIndexFromOrientation(cubeState.eo, 2),\n    getIndexFromPermutation(cubeState.ep, [8, 9, 10, 11], true),\n    getParity(cubeState.cp),\n    getIndexFromPermutation(cubeState.cp, [0, 1, 2, 3, 4, 5]),\n    getIndexFromPermutation(cubeState.ep, [0, 1, 2]),\n    getIndexFromPermutation(cubeState.ep, [3, 4, 5]),\n  ]);\n","import {\n  getPermutationFromIndex,\n  getIndexFromPermutation,\n  getOrientationFromIndex,\n  getIndexFromOrientation,\n} from \"./coordinates\";\n\nimport {\n  doEdgeMove,\n  doCornerMove,\n  moveHelper,\n  allMoves,\n  identity,\n} from \"./cube\";\n\nimport { factorial } from \"./tools\";\n\n/**\n * Create a function which performs a move on a coordinate.\n */\nconst createMoveHandler = (\n  getVector: GetVectorCallback,\n  cubieMove: CubieMoveCallback,\n  getIndex: GetIndexCallback\n) => (index: number, move: number) => {\n  let vector = getVector(index);\n  vector = cubieMove(vector, move);\n  return getIndex(vector);\n};\n\ntype GetVectorCallback = (index: number) => number[];\ntype CubieMoveCallback = (pieces: number[], moveIndex: number) => number[];\ntype GetIndexCallback = (pieces: number[]) => number;\n\ninterface BaseMoveTableSettings {\n  name: string;\n  size: number;\n  defaultIndex?: number;\n  solvedIndexes?: number[];\n  doMove?: (table: number[][], index: number, move: number) => number;\n}\n\ninterface MoveTableSettingsWithTable extends BaseMoveTableSettings {\n  table: number[][];\n}\n\nexport interface MoveTableSettingsWithoutTable extends BaseMoveTableSettings {\n  moves?: number[];\n  getVector: GetVectorCallback;\n  cubieMove: (pieces: number[], moveIndex: number) => number[];\n  getIndex: GetIndexCallback;\n}\n\nexport type MoveTableSettings =\n  | MoveTableSettingsWithTable\n  | MoveTableSettingsWithoutTable;\n\nexport class MoveTable {\n  name: string;\n  size: number;\n  defaultIndex: number;\n  solvedIndexes: number[];\n  table: number[][];\n\n  constructor(settings: MoveTableSettings) {\n    // A name must be provided if the generic solver is being used, as\n    // we use them to create the pruning tables.\n    this.name = settings.name;\n\n    // Some tables in the Kociemba solver define their own size, as\n    // they are a subset of another already generated helper table.\n    this.size = settings.size;\n\n    this.defaultIndex = settings.defaultIndex || 0;\n    this.solvedIndexes = settings.solvedIndexes || [this.defaultIndex];\n\n    // We allow defining a custom function that returns the updated\n    // index. This is useful for helper tables which are subsets\n    // of already generated tables.\n    const doMove = settings.doMove;\n    if (doMove) {\n      this.doMove = (index, move) => doMove(this.table, index, move);\n    }\n\n    if (\"table\" in settings) {\n      this.table = settings.table;\n\n      // If a pre-generated table is provide, do not generate another one.\n      return;\n    }\n\n    const cubieMove = createMoveHandler(\n      settings.getVector,\n      settings.cubieMove,\n      settings.getIndex\n    );\n\n    this.table = this.createMoveTable(settings.size, cubieMove, settings.moves);\n  }\n\n  doMove(index: number, move: number): number {\n    return this.table[index][move];\n  }\n\n  createMoveTable(\n    size: number,\n    cubieMove: ReturnType<typeof createMoveHandler>,\n    moves = allMoves\n  ): number[][] {\n    const table: number[][] = [];\n\n    for (let i = 0; i < size; i += 1) {\n      table.push([]);\n    }\n\n    // Create a matrix which stores the result after\n    // applying a move to a coordinate.\n    for (let i = 0; i < size; i += 1) {\n      for (let j = 0; j < moves.length; j += 1) {\n        const move = moves[j];\n\n        if (!table[i][move]) {\n          // Assign both the value and its inverse at once\n          // to avoid exess computing on the cubie level.\n          const result = cubieMove(i, move);\n          const inverse = move - 2 * (move % 3) + 2;\n          table[i][move] = result;\n          table[result][inverse] = i;\n        }\n      }\n    }\n\n    return table;\n  }\n}\n\nexport interface PermutationTableSettings {\n  name: string;\n  moves?: number[];\n  affected: number[];\n  reversed?: boolean;\n  size?: number;\n}\n\nexport const createCornerPermutationTable = (\n  settings: PermutationTableSettings\n): MoveTable =>\n  new MoveTable({\n    name: settings.name,\n    moves: settings.moves,\n    defaultIndex: getIndexFromPermutation(\n      [0, 1, 2, 3, 4, 5, 6, 7],\n      settings.affected,\n      settings.reversed\n    ),\n    size:\n      settings.size || factorial(8) / factorial(8 - settings.affected.length),\n    getVector: (index) =>\n      getPermutationFromIndex(\n        index,\n        settings.affected.slice(),\n        8,\n        settings.reversed\n      ),\n    cubieMove: (pieces, moveIndex) =>\n      moveHelper({ cp: pieces, co: identity.co }, moveIndex, doCornerMove).cp,\n    getIndex: (pieces) =>\n      getIndexFromPermutation(pieces, settings.affected, settings.reversed),\n  });\n\nexport const createEdgePermutationTable = (\n  settings: PermutationTableSettings\n): MoveTable =>\n  new MoveTable({\n    name: settings.name,\n    moves: settings.moves,\n    defaultIndex: getIndexFromPermutation(\n      [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],\n      settings.affected,\n      settings.reversed\n    ),\n    size:\n      settings.size || factorial(12) / factorial(12 - settings.affected.length),\n    getVector: (index) =>\n      getPermutationFromIndex(\n        index,\n        settings.affected.slice(),\n        12,\n        settings.reversed\n      ),\n    cubieMove: (pieces, moveIndex) =>\n      moveHelper({ ep: pieces, eo: identity.eo }, moveIndex, doEdgeMove).ep,\n    getIndex: (pieces) =>\n      getIndexFromPermutation(pieces, settings.affected, settings.reversed),\n  });\n\nconst getCorrectOrientations = (\n  affected: number[],\n  numPieces: number,\n  numStates: number\n) => {\n  const indexes = [];\n\n  const size = numStates ** (numPieces - 1);\n\n  const target = numStates ** (numPieces - affected.length - 1);\n\n  for (let i = 0; i < size && indexes.length < target; i += 1) {\n    const orientation = getOrientationFromIndex(i, numPieces, numStates);\n\n    if (affected.every((piece) => orientation[piece] === 0)) {\n      indexes.push(i);\n    }\n  }\n\n  return indexes;\n};\n\nexport interface OrientationTableSettings {\n  name: string;\n  affected: number[];\n}\n\nexport const createEdgeOrientationTable = (\n  settings: OrientationTableSettings\n): MoveTable =>\n  new MoveTable({\n    name: settings.name,\n    size: 2048,\n    solvedIndexes: getCorrectOrientations(settings.affected, 12, 2),\n    getVector: (index) => getOrientationFromIndex(index, 12, 2),\n    cubieMove: (pieces, moveIndex) =>\n      moveHelper({ ep: identity.ep, eo: pieces }, moveIndex, doEdgeMove).eo,\n    getIndex: (pieces) => getIndexFromOrientation(pieces, 2),\n  });\n\nexport const createCornerOrientationTable = (\n  settings: OrientationTableSettings\n): MoveTable =>\n  new MoveTable({\n    name: settings.name,\n    size: 2187,\n    solvedIndexes: getCorrectOrientations(settings.affected, 8, 3),\n    getVector: (index) => getOrientationFromIndex(index, 8, 3),\n    cubieMove: (pieces, moveIndex) =>\n      moveHelper({ cp: identity.cp, co: pieces }, moveIndex, doCornerMove).co,\n    getIndex: (pieces) => getIndexFromOrientation(pieces, 3),\n  });\n","import { cartesian } from \"./tools\";\nimport { MoveTable } from \"./move-table\";\n\n/**\n * A pruning table gives a lower bound on the number of moves\n * required to reach a target state.\n */\nclass PruningTable {\n  table: number[];\n  constructor(moveTables: MoveTable[], moves: number[]) {\n    this.table = [];\n    this.computePruningTable(moveTables, moves);\n  }\n\n  setPruningValue(index: number, value: number): void {\n    this.table[index >> 3] ^= (0xf ^ value) << ((index & 7) << 2);\n  }\n\n  getPruningValue(index: number): number {\n    return (this.table[index >> 3] >> ((index & 7) << 2)) & 0xf;\n  }\n\n  computePruningTable(moveTables: MoveTable[], moves: number[]): void {\n    const size = moveTables.reduce((acc, obj) => acc * obj.size, 1);\n\n    this.table.length = 0;\n\n    for (let i = 0; i < (size + 7) >> 3; i += 1) {\n      this.table.push(-1);\n    }\n\n    let depth = 0;\n    let done = 0;\n\n    const powers = [1];\n\n    for (let i = 1; i < moveTables.length; i += 1) {\n      powers.push(moveTables[i - 1].size * powers[i - 1]);\n    }\n\n    const permutations = cartesian(\n      moveTables.map((data) => data.solvedIndexes)\n    );\n\n    for (let i = 0; i < permutations.length; i += 1) {\n      let index = 0;\n\n      for (let j = 0; j < permutations[i].length; j += 1) {\n        index += powers[j] * permutations[i][j];\n      }\n\n      this.setPruningValue(index, 0);\n\n      done += 1;\n    }\n\n    // We generate the table using a BFS. Depth 0 contains all positions which\n    // are solved, and we loop through the correct indexes and apply all 18 moves\n    // to the correct states. Then we visit all positions at depth 2, and apply\n    // the 18 moves, and so on.\n    while (done !== size) {\n      // When half the table is generated, we switch to a backward search\n      // where we apply the 18 moves to all empty entries. If the result\n      // is a position which corresponds to the previous depth, we set the\n      // index to the current depth.\n      const inverse = done > size / 2;\n      const find = inverse ? 0xf : depth;\n      const check = inverse ? depth : 0xf;\n\n      depth += 1;\n\n      for (let index = 0; index < size; index += 1) {\n        if (this.getPruningValue(index) === find) {\n          for (let moveIndex = 0; moveIndex < moves.length; moveIndex += 1) {\n            const move = moves[moveIndex];\n\n            let currentIndex = index;\n            let position = 0;\n\n            for (let i = powers.length - 1; i >= 0; i -= 1) {\n              position +=\n                powers[i] *\n                moveTables[i].doMove(\n                  Math.floor(currentIndex / powers[i]),\n                  move\n                );\n              currentIndex %= powers[i];\n            }\n\n            if (this.getPruningValue(position) === check) {\n              done += 1;\n\n              if (inverse) {\n                this.setPruningValue(index, depth);\n                break;\n              }\n\n              this.setPruningValue(position, depth);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\nexport default PruningTable;\n","import { parseAlgorithm, formatAlgorithm, invertAlgorithm } from \"./algorithms\";\nimport PruningTable from \"./pruning-table\";\nimport { allMoves } from \"./cube\";\nimport { MoveTable } from \"./move-table\";\n\nexport interface CreateTableCallback {\n  (): {\n    moveTables: MoveTable[];\n    pruningTables: string[][];\n  };\n}\n\nexport interface SearchSolution {\n  indexes: number[];\n  solution: number[]; // array of move indexes\n}\n\ninterface BaseSearchSettings {\n  scramble?: string;\n  maxDepth?: number;\n  lastMove?: number;\n  format?: boolean;\n  indexes?: number[];\n}\n\nexport interface SearchSettingsWithoutFormat extends BaseSearchSettings {\n  format: false;\n}\n\nexport interface SearchSettingsWithFormat extends BaseSearchSettings {\n  format?: true;\n}\n\nexport type SearchSettings =\n  | SearchSettingsWithFormat\n  | SearchSettingsWithoutFormat;\n\ntype DefaultedSearchSettings = Required<\n  Pick<SearchSettings, \"maxDepth\" | \"lastMove\" | \"format\">\n> &\n  SearchSettings;\n\nclass Search {\n  moves: number[];\n  initialized!: boolean;\n  moveTables!: MoveTable[];\n  settings!: DefaultedSearchSettings;\n  pruningTables!: Array<{\n    pruningTable: PruningTable;\n    moveTableIndexes: number[];\n  }>;\n  createTables: CreateTableCallback;\n\n  constructor(createTables: CreateTableCallback, moves = allMoves) {\n    this.createTables = createTables;\n    this.moves = moves;\n  }\n\n  initialize(): void {\n    if (this.initialized) {\n      return;\n    }\n\n    this.initialized = true;\n\n    const { moveTables, pruningTables } = this.createTables();\n\n    this.moveTables = moveTables;\n\n    this.pruningTables = [];\n\n    pruningTables.forEach((moveTableNames) => {\n      const moveTableIndexes = moveTableNames.map((name) =>\n        this.moveTables.map((table) => table.name).indexOf(name)\n      );\n\n      moveTableIndexes.sort(\n        (a, b) => this.moveTables[a].size - this.moveTables[b].size\n      );\n\n      const mappedTables: MoveTable[] = [];\n\n      moveTableIndexes.forEach((i) => mappedTables.push(this.moveTables[i]));\n\n      const pruningTable = new PruningTable(mappedTables, this.moves);\n\n      this.pruningTables.push({\n        pruningTable,\n        moveTableIndexes,\n      });\n    });\n  }\n\n  handleSolution(\n    solution: number[],\n    indexes: number[]\n  ): SearchSolution | false {\n    return {\n      solution,\n      indexes,\n    };\n  }\n\n  search(\n    indexes: number[],\n    depth: number,\n    lastMove: number,\n    solution: number[]\n  ): SearchSolution | false {\n    let minimumDistance = 0;\n\n    for (let i = 0; i < this.pruningTables.length; i += 1) {\n      let index = indexes[this.pruningTables[i].moveTableIndexes[0]];\n      let power = 1;\n\n      for (\n        let j = 1;\n        j < this.pruningTables[i].moveTableIndexes.length;\n        j += 1\n      ) {\n        power *= this.moveTables[this.pruningTables[i].moveTableIndexes[j - 1]]\n          .size;\n        index += indexes[this.pruningTables[i].moveTableIndexes[j]] * power;\n      }\n\n      const distance = this.pruningTables[i].pruningTable.getPruningValue(\n        index\n      );\n\n      if (distance > depth) {\n        return false;\n      }\n\n      // The true minimum distance to the solved indexes is\n      // given by the pruning table with the largest distance.\n      if (distance > minimumDistance) {\n        minimumDistance = distance;\n      }\n    }\n\n    if (minimumDistance === 0) {\n      return this.handleSolution(solution, indexes);\n    }\n\n    if (depth > 0) {\n      for (let i = 0; i < this.moves.length; i += 1) {\n        const move = this.moves[i];\n\n        if (\n          Math.floor(move / 3) !== Math.floor(lastMove / 3) &&\n          Math.floor(move / 3) !== Math.floor(lastMove / 3) - 3\n        ) {\n          const updatedIndexes = [];\n\n          for (let j = 0; j < indexes.length; j += 1) {\n            updatedIndexes.push(this.moveTables[j].doMove(indexes[j], move));\n          }\n\n          const result = this.search(\n            updatedIndexes,\n            depth - 1,\n            move,\n            solution.concat([move])\n          );\n\n          if (result) {\n            return result;\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  solve(settings: SearchSettingsWithFormat): string | false;\n  solve(settings: SearchSettingsWithoutFormat): SearchSolution | false;\n  solve(settings: SearchSettings): SearchSolution | string | false {\n    this.initialize();\n\n    this.settings = {\n      maxDepth: 22, // For the Kociemba solver.\n      lastMove: 0,\n      format: true,\n      ...settings,\n    };\n\n    const indexes = this.settings.indexes || [];\n\n    let solutionRotation;\n\n    if (this.settings.scramble) {\n      const [moves, totalRotation] = parseAlgorithm(\n        `x ${this.settings.scramble}`,\n        true\n      );\n\n      if (totalRotation.length > 0) {\n        solutionRotation = invertAlgorithm(totalRotation.join(\" \"));\n      }\n\n      for (let i = 0; i < this.moveTables.length; i += 1) {\n        indexes.push(this.moveTables[i].defaultIndex);\n      }\n\n      moves.forEach((move) => {\n        for (let i = 0; i < indexes.length; i += 1) {\n          indexes[i] = this.moveTables[i].doMove(indexes[i], move);\n        }\n      });\n    }\n\n    for (let depth = 0; depth <= this.settings.maxDepth; depth += 1) {\n      const solution = this.search(indexes, depth, this.settings.lastMove, []);\n\n      if (solution) {\n        if (this.settings.format) {\n          const formatted = formatAlgorithm(solution.solution);\n\n          if (solutionRotation) {\n            // If we have rotations in the scramble, apply them to the solution\n            // and then parse again to remove the rotations. This results in a\n            // solution that can be applied from the result scramble orientation.\n            return formatAlgorithm(\n              parseAlgorithm(`${solutionRotation} ${formatted}`)\n            );\n          }\n\n          return formatted;\n        }\n\n        return solution;\n      }\n    }\n\n    return false;\n  }\n}\n\nexport default Search;\n","import {\n  getPermutationFromIndex,\n  getOrientationFromIndex,\n  getParity,\n} from \"app/common/cube/libs/coordinates\";\n\nimport { getRandomInt, factorial } from \"app/common/cube/libs/tools\";\n\nimport { identity, CubeIndexes } from \"app/common/cube/libs/cube\";\n\nimport {\n  solveCube,\n  fiveSideSolver,\n} from \"app/common/cube/solvers/five-side-solver\";\n\nconst getEdgeOrientation = (enabled: number[], orientLastLayer: boolean) => {\n  const pieces = getOrientationFromIndex(\n    getRandomInt(0, 2 ** (enabled.length - 1)),\n    enabled.length,\n    2\n  );\n\n  const orientation = Array(12).fill(0);\n\n  if (!orientLastLayer) {\n    enabled.forEach((piece, i) => {\n      orientation[piece] = pieces[i];\n    });\n  }\n\n  return orientation;\n};\n\nconst getCornerOrientation = (enabled: number[], orientLastLayer: boolean) => {\n  const pieces = getOrientationFromIndex(\n    getRandomInt(0, 3 ** (enabled.length - 1)),\n    enabled.length,\n    3\n  );\n\n  const orientation = Array(8).fill(0);\n\n  if (!orientLastLayer) {\n    enabled.forEach((piece, i) => {\n      orientation[piece] = pieces[i];\n    });\n  }\n\n  return orientation;\n};\n\n/**\n * Returns a permutation vector where all pieces are\n * solved, except for the given enabled pieces.\n */\nconst getPermutationFromEnabled = (enabled: number[], size: number) => {\n  const pieces = getPermutationFromIndex(\n    getRandomInt(0, factorial(enabled.length)),\n    enabled.slice(0),\n    enabled.length\n  );\n\n  const permutation = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].slice(0, size);\n\n  enabled.forEach((piece, i) => {\n    permutation[piece] = pieces[i];\n  });\n\n  return permutation;\n};\n\n/**\n * Generates a random scramble where all pieces are solved, except\n * for the provided edges and corners, which will be scrambled randomly.\n */\nexport const getScrambleForPieces = (\n  scrambleEdges: number[],\n  scrambleCorners: number[],\n  isScrambleSolved: (state: CubeIndexes) => boolean,\n  orientLastLayer = false\n): string | false => {\n  let scrambleState;\n  const center = identity.center;\n\n  do {\n    scrambleState = {\n      center,\n      ep: getPermutationFromEnabled(scrambleEdges, 12),\n      eo: getEdgeOrientation(scrambleEdges, orientLastLayer),\n      cp: getPermutationFromEnabled(scrambleCorners, 8),\n      co: getCornerOrientation(scrambleCorners, orientLastLayer),\n    };\n  } while (\n    getParity(scrambleState.ep) !== getParity(scrambleState.cp) ||\n    isScrambleSolved(scrambleState)\n  );\n\n  const solution = solveCube(scrambleState);\n  if (solution) {\n    return fiveSideSolver(solution);\n  }\n  return false;\n};\n\nexport default getScrambleForPieces;\n","import {\n  createEdgePermutationTable,\n  createEdgeOrientationTable,\n} from \"app/common/cube/libs/move-table\";\n\nimport Search from \"app/common/cube/libs/search\";\n\nimport { fiveSideMoves, Edges } from \"app/common/cube/libs/cube\";\n\nexport const CrossSearch = new Search(\n  () => ({\n    moveTables: [\n      createEdgePermutationTable({\n        name: \"EdgePermutation\",\n        affected: [Edges.UB, Edges.DB, Edges.BL, Edges.BR],\n      }),\n\n      createEdgeOrientationTable({\n        name: \"EdgeOrientation\",\n        affected: [Edges.UB, Edges.DB, Edges.BL, Edges.BR],\n      }),\n    ],\n\n    pruningTables: [[\"EdgePermutation\"], [\"EdgeOrientation\"]],\n  }),\n  fiveSideMoves\n);\n\nexport const crossSolver = (scramble: string): string | false =>\n  CrossSearch.solve({ scramble });\n","import {\n  CubeIndexes,\n  Centers,\n  Edges,\n  Corners,\n  identity,\n  doEdgeMove,\n  doCornerMove,\n  doCenterMove,\n} from \"./cube\";\n\nconst centerFacelets = [\"U\", \"R\", \"F\", \"D\", \"L\", \"B\"];\n\nconst cornerFacelets = [\n  [\"U8\", \"R0\", \"F2\"],\n  [\"U6\", \"F0\", \"L2\"],\n  [\"U0\", \"L0\", \"B2\"],\n  [\"U2\", \"B0\", \"R2\"],\n  [\"D2\", \"F8\", \"R6\"],\n  [\"D0\", \"L8\", \"F6\"],\n  [\"D6\", \"B8\", \"L6\"],\n  [\"D8\", \"R8\", \"B6\"],\n];\n\nconst edgeFacelets = [\n  [\"U5\", \"R1\"],\n  [\"U7\", \"F1\"],\n  [\"U3\", \"L1\"],\n  [\"U1\", \"B1\"],\n  [\"D5\", \"R7\"],\n  [\"D1\", \"F7\"],\n  [\"D3\", \"L7\"],\n  [\"D7\", \"B7\"],\n  [\"F5\", \"R3\"],\n  [\"F3\", \"L5\"],\n  [\"B5\", \"L3\"],\n  [\"B3\", \"R5\"],\n];\n\nconst { F, R, U, B, L, D } = Centers;\nconst { UR, UF, UL, UB, DR, DF, DL, DB, FR, FL, BL, BR } = Edges;\nconst { URF, UFL, ULB, UBR, DFR, DLF, DBL, DBR } = Corners;\n\nexport const rotations: Record<string, CubeIndexes> = {\n  x: {\n    center: [F, 1, D, B, 4, U],\n    cp: [DFR, DLF, UFL, URF, DBR, DBL, ULB, UBR],\n    co: [2, 1, 2, 1, 1, 2, 1, 2],\n    ep: [FR, DF, FL, UF, BR, DB, BL, UB, DR, DL, UL, UR],\n    eo: [0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0],\n  },\n  y: {\n    center: [0, B, R, 3, F, L],\n    cp: [UBR, URF, UFL, ULB, DBR, DFR, DLF, DBL],\n    co: identity.co,\n    ep: [3, 0, 1, 2, 7, 4, 5, 6, 11, 8, 9, 10],\n    eo: [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1],\n  },\n  z: {\n    center: [L, U, 2, R, D, 5],\n    cp: [UFL, DLF, DBL, ULB, URF, DFR, DBR, UBR],\n    co: [1, 2, 1, 2, 2, 1, 2, 1],\n    ep: [UL, FL, DF, BL, UR, FR, DR, BR, UF, DL, DB, UB],\n    eo: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],\n  },\n};\n\nconst mod = (n: number, m: number) => ((n % m) + m) % m;\n\nconst getFaceletIndex = (facelet: string) =>\n  centerFacelets.indexOf(facelet[0]) * 9 + Number(facelet[1]);\nconst getCornerFacelet = (\n  cube: CubeIndexes,\n  cornerIndex: number,\n  orientationIndex: number\n) => {\n  return cornerFacelets[cube.cp[cornerIndex]][\n    mod(orientationIndex - cube.co[cornerIndex], 3)\n  ][0];\n};\n\nconst getEdgeFacelet = (\n  cube: CubeIndexes,\n  edgeIndex: number,\n  orientationIndex: number\n) =>\n  edgeFacelets[cube.ep[edgeIndex]][\n    mod(orientationIndex - cube.eo[edgeIndex], 2)\n  ][0];\n\nexport interface FaceletArrayFilter {\n  edges?: number[];\n  corners?: number[];\n  facelets?: string[];\n}\n\nexport interface FaceletArrayOptions {\n  filter?: FaceletArrayFilter;\n  rotations?: string;\n}\n\nexport const getFaceletArray = (\n  cube: CubeIndexes,\n  options: FaceletArrayOptions = {}\n): string[] => {\n  const facelets: string[] = [];\n\n  if (options.rotations) {\n    cube = doRotations(cube, options.rotations);\n  }\n\n  // add center facelets to array\n  centerFacelets.forEach((facelet, centerIndex) => {\n    facelets[9 * cube.center[centerIndex] + 4] = facelet;\n  });\n\n  // add corner cubie facelets\n  cornerFacelets.forEach((corner, cornerIndex) => {\n    corner.forEach((facelet, orientation) => {\n      const faceletIndex = getFaceletIndex(facelet);\n      const faceletValue = getCornerFacelet(cube, cornerIndex, orientation);\n\n      facelets[faceletIndex] =\n        !options.filter ||\n        options.filter.corners?.includes(cube.cp[cornerIndex]) ||\n        options.filter.facelets?.includes(faceletValue)\n          ? faceletValue\n          : \"G\";\n    });\n  });\n\n  // add edge cubie facelets\n  edgeFacelets.forEach((edge, edgeIndex) => {\n    edge.forEach((facelet, orientation) => {\n      const faceletIndex = getFaceletIndex(facelet);\n      const faceletValue = getEdgeFacelet(cube, edgeIndex, orientation);\n\n      facelets[faceletIndex] =\n        !options.filter ||\n        options.filter.edges?.includes(cube.ep[edgeIndex]) ||\n        options.filter.facelets?.includes(faceletValue)\n          ? faceletValue\n          : \"G\";\n    });\n  });\n\n  return facelets;\n};\n\nconst powers: Record<string, number> = {\n  \"\": 1,\n  2: 2,\n  \"'\": 3,\n};\n\nexport const doRotations = (\n  cube: CubeIndexes,\n  rotationAlg: string\n): CubeIndexes => {\n  return rotationAlg\n    .split(\" \")\n    .map((rotation: string) => ({\n      move: rotations[rotation.charAt(0)],\n      pow: powers[rotation.charAt(1)],\n    }))\n    .reduce((newCube, { move, pow }) => {\n      for (let i = 0; i < pow; i++) {\n        newCube = {\n          center: doCenterMove(newCube.center, move),\n          ...doEdgeMove(newCube, move),\n          ...doCornerMove(newCube, move),\n        };\n      }\n      return newCube;\n    }, cube);\n};\n","import React from \"react\";\n\nimport { doAlgorithm } from \"app/common/cube/libs/cube\";\nimport {\n  getFaceletArray,\n  FaceletArrayFilter,\n} from \"app/common/cube/libs/cube-preview\";\n\ninterface CubePreviewProps {\n  scrambleCode: string;\n  filter?: FaceletArrayFilter;\n  colorMap?: Record<string, string>;\n}\n\nexport function CubePreview(props: CubePreviewProps): JSX.Element {\n  const cubeIndexes = doAlgorithm(props.scrambleCode);\n  const colorMap = props.colorMap ?? defaultColorMap;\n  const svgString = getFaceletArray(cubeIndexes, {\n    filter: props.filter,\n  })\n    .map((faceKey) => colorMap[faceKey])\n    .reduce((acc, color) => acc.replace(\"{}\", color), template);\n\n  return (\n    <div\n      className=\"computer:w-96 landscape:w-1/3 computer:self-start w-80 self-center\"\n      dangerouslySetInnerHTML={{ __html: svgString }}\n    ></div>\n  );\n}\n\nconst defaultColorMap: Record<string, string> = {\n  U: \"white\",\n  R: \"red\",\n  F: \"green\",\n  D: \"yellow\",\n  L: \"orange\",\n  B: \"blue\",\n  G: \"gray\",\n};\n\nconst template = `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"-5 -5 258 196\" style=\"stroke-linejoin:round;\">\n  <g>\n    <rect x=\"64\" y=\"2\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"2\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"2\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"22\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"22\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"22\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"42\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"42\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"42\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"126\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"146\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"166\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"126\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"146\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"166\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"126\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"146\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"166\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"126\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"126\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"126\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"146\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"146\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"146\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"64\" y=\"166\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"84\" y=\"166\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"104\" y=\"166\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"2\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"22\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"42\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"2\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"22\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"42\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"2\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"22\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"42\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"188\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"208\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"228\" y=\"64\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"188\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"208\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"228\" y=\"84\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"188\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"208\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n    <rect x=\"228\" y=\"104\" width=\"20\" height=\"20\" fill=\"{}\" stroke=\"black\"></rect>\n  </g>\n</svg>`;\n","import styled from \"styled-components/macro\";\n\nexport const ButtonRow = styled.div.attrs({\n  className:\n    \"flex flex-row w-full computer:children:flex-initial children:flex-1 children:ml-sm children:first:ml-0 children:w-40\",\n})``;\n\nexport const ContentContainer = styled.div.attrs({\n  className:\n    \"flex flex-col m-med children:mt-med children:first:mt-0 computer:items-start\",\n})``;\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, FormControl, Select, MenuItem } from \"@material-ui/core\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { ApplicationState } from \"app/common/store\";\n\nimport { getRobotServer } from \"app/robot/store/selectors\";\n\nimport { generateScramble } from \"app/common/cube/scramblers/full\";\nimport {\n  generateOLLScramble,\n  generateFirstLookOLLScramble,\n  generateSecondLookOLLScramble,\n  generatePLLScramble,\n  generateFirstLookPLLScramble,\n  generateSecondLookPLLScramble,\n} from \"app/common/cube/scramblers/cfop\";\nimport { crossSolver } from \"app/common/cube/solvers/cross-solver\";\nimport { CubePreview } from \"app/cube-preview\";\nimport { executeScramble } from \"app/robot/bluetooth-utils\";\nimport { doAlgorithm, Edges, Corners } from \"app/common/cube/libs/cube\";\nimport { FaceletArrayFilter } from \"app/common/cube/libs/cube-preview\";\nimport {\n  isF2LSolved,\n  isCrossSolved,\n} from \"app/common/cube/scramblers/solve-criteria\";\nimport { ButtonRow, ContentContainer } from \"app/common/styled-components\";\n\ninterface CFOPScrambleProps {\n  robotServer: BluetoothRemoteGATTServer | null;\n}\n\ntype CFOPPhaseType =\n  | \"cross\"\n  | \"f2l\"\n  | \"oll\"\n  | \"firstLookOll\"\n  | \"secondLookOll\"\n  | \"pll\"\n  | \"firstLookPll\"\n  | \"secondLookPll\";\n\nconst invertedColorMap: Record<string, string> = {\n  U: \"yellow\",\n  R: \"red\",\n  F: \"blue\",\n  D: \"white\",\n  L: \"orange\",\n  B: \"green\",\n  G: \"gray\",\n};\n\nconst crossFilter = {\n  edges: [Edges.DB, Edges.DF, Edges.DR, Edges.DL],\n};\n\nconst f2lFilter = {\n  edges: [\n    Edges.DB,\n    Edges.DF,\n    Edges.DR,\n    Edges.DL,\n    Edges.BL,\n    Edges.BR,\n    Edges.FL,\n    Edges.FR,\n  ],\n  corners: [Corners.DBR, Corners.DLF, Corners.DBL, Corners.DFR],\n};\n\nconst ollFilter = {\n  ...f2lFilter,\n  facelets: [\"U\"],\n};\n\nconst filters: Record<string, FaceletArrayFilter> = {\n  cross: crossFilter,\n  f2l: f2lFilter,\n  firstLookOll: ollFilter,\n  secondLookOll: ollFilter,\n  oll: ollFilter,\n};\n\nexport function CFOPScramble(props: CFOPScrambleProps): JSX.Element {\n  const [cfopPhase, setCFOPPhase] = useState<CFOPPhaseType>(\"cross\");\n  const [scramble, setScramble] = useState<string>(\"\");\n\n  const onSendBtnClick = () => {\n    let scramble: string | false;\n    switch (cfopPhase) {\n      case \"cross\":\n        setScramble(generateScramble(26, isCrossSolved));\n        break;\n      case \"f2l\":\n        // faster to do cross solve than scrambling all pieces but the cross\n        // and completing a full solve\n        while (true) {\n          scramble = generateScramble();\n          const solveCode = crossSolver(scramble);\n          if (solveCode) {\n            if (!isF2LSolved(doAlgorithm(solveCode))) {\n              setScramble(`${scramble} ${solveCode}`);\n              break;\n            }\n          }\n        }\n        break;\n      case \"oll\":\n        scramble = generateOLLScramble();\n        if (scramble) {\n          setScramble(scramble);\n        }\n        break;\n      case \"firstLookOll\":\n        scramble = generateFirstLookOLLScramble();\n        if (scramble) {\n          setScramble(scramble);\n        }\n        break;\n      case \"secondLookOll\":\n        scramble = generateSecondLookOLLScramble();\n        if (scramble) {\n          setScramble(scramble);\n        }\n        break;\n      case \"pll\":\n        scramble = generatePLLScramble();\n        if (scramble) {\n          setScramble(scramble);\n        }\n        break;\n      case \"firstLookPll\":\n        scramble = generateFirstLookPLLScramble();\n        if (scramble) {\n          setScramble(scramble);\n        }\n        break;\n      case \"secondLookPll\":\n        scramble = generateSecondLookPLLScramble();\n        if (scramble) {\n          setScramble(scramble);\n        }\n        break;\n    }\n  };\n\n  return (\n    <ContentContainer>\n      <FormControl component=\"fieldset\">\n        <Select\n          className=\"computer:w-96\"\n          value={cfopPhase}\n          onChange={(e) => {\n            const phase = e.target.value as CFOPPhaseType;\n            if (phase !== cfopPhase) {\n              setScramble(\"\");\n            }\n            setCFOPPhase(phase);\n          }}\n        >\n          <MenuItem value=\"cross\">Cross</MenuItem>\n          <MenuItem value=\"f2l\">F2L</MenuItem>\n          <MenuItem value=\"firstLookOll\">First look OLL</MenuItem>\n          <MenuItem value=\"secondLookOll\">Second look OLL</MenuItem>\n          <MenuItem value=\"oll\">Full OLL</MenuItem>\n          <MenuItem value=\"firstLookPll\">First look PLL</MenuItem>\n          <MenuItem value=\"secondLookPll\">Second look PLL</MenuItem>\n          <MenuItem value=\"pll\">Full PLL</MenuItem>\n        </Select>\n      </FormControl>\n      <CubePreview\n        scrambleCode={scramble}\n        filter={filters[cfopPhase]}\n        colorMap={invertedColorMap}\n      />\n      <ButtonRow>\n        <Button variant=\"contained\" onClick={onSendBtnClick}>\n          <FormattedMessage id=\"scramble.actions.scramble\" />\n        </Button>\n        <Button\n          variant=\"contained\"\n          disabled={!Boolean(scramble) || !Boolean(props.robotServer)}\n          onClick={() => executeScramble(props.robotServer, scramble)}\n        >\n          <FormattedMessage id=\"scramble.actions.send\" />\n        </Button>\n      </ButtonRow>\n    </ContentContainer>\n  );\n}\n\nexport const ConnectedCFOPScramble = connect((state: ApplicationState) => ({\n  robotServer: getRobotServer(state),\n}))(CFOPScramble);\n","import getScrambleForPieces from \"app/common/cube/libs/scramble-pieces\";\nimport { Edges, Corners } from \"app/common/cube/libs/cube\";\nimport {\n  isOLLSolved,\n  isFirstLookOLLSolved,\n  isFirstLookPLLSolved,\n  isCubeSolved,\n} from \"app/common/cube/scramblers/solve-criteria\";\n\nexport const generateOLLScramble = (): string | false =>\n  getScrambleForPieces(\n    [Edges.UR, Edges.UF, Edges.UL, Edges.UB],\n    [Corners.URF, Corners.UFL, Corners.ULB, Corners.UBR],\n    isOLLSolved\n  );\n\nexport const generateFirstLookOLLScramble = (): string | false =>\n  getScrambleForPieces(\n    [Edges.UR, Edges.UF, Edges.UL, Edges.UB],\n    [Corners.URF, Corners.UFL, Corners.ULB, Corners.UBR],\n    isFirstLookOLLSolved\n  );\n\nexport const generateSecondLookOLLScramble = (): string | false =>\n  getScrambleForPieces(\n    [],\n    [Corners.URF, Corners.UFL, Corners.ULB, Corners.UBR],\n    isOLLSolved\n  );\n\nexport const generatePLLScramble = (): string | false =>\n  getScrambleForPieces(\n    [Edges.UR, Edges.UF, Edges.UL, Edges.UB],\n    [Corners.URF, Corners.UFL, Corners.ULB, Corners.UBR],\n    isCubeSolved,\n    true\n  );\n\nexport const generateFirstLookPLLScramble = (): string | false =>\n  getScrambleForPieces(\n    [Edges.UR, Edges.UF, Edges.UL, Edges.UB],\n    [Corners.URF, Corners.UFL, Corners.ULB, Corners.UBR],\n    isFirstLookPLLSolved,\n    true\n  );\n\nexport const generateSecondLookPLLScramble = (): string | false =>\n  getScrambleForPieces(\n    [Edges.UR, Edges.UF, Edges.UL, Edges.UB],\n    [],\n    isCubeSolved,\n    true\n  );\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, InputLabel, Input } from \"@material-ui/core\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { ApplicationState } from \"app/common/store\";\n\nimport { getRobotServer } from \"app/robot/store/selectors\";\n\nimport { generateScramble } from \"app/common/cube/scramblers/full\";\nimport { CubePreview } from \"app/cube-preview\";\nimport { executeScramble } from \"app/robot/bluetooth-utils\";\nimport { ButtonRow, ContentContainer } from \"app/common/styled-components\";\n\ninterface RandomScrambleProps {\n  robotServer: BluetoothRemoteGATTServer | null;\n}\n\nexport function RandomScramble(props: RandomScrambleProps): JSX.Element {\n  const [scramble, setScramble] = useState<string>(\"\");\n  return (\n    <ContentContainer>\n      <div className=\"flex flex-col w-full\">\n        <InputLabel htmlFor=\"scramble\" className=\"text-xs\">\n          Scramble\n        </InputLabel>\n        <Input id=\"scramble\" value={scramble} readOnly multiline fullWidth />\n      </div>\n\n      <CubePreview scrambleCode={scramble} />\n\n      <ButtonRow>\n        <Button\n          variant=\"contained\"\n          onClick={() => {\n            setScramble(generateScramble());\n          }}\n        >\n          <FormattedMessage id=\"scramble.actions.scramble\" />\n        </Button>\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          disabled={!scramble || !Boolean(props.robotServer)}\n          onClick={() => executeScramble(props.robotServer, scramble)}\n        >\n          <FormattedMessage id=\"scramble.actions.send\" />\n        </Button>\n      </ButtonRow>\n    </ContentContainer>\n  );\n}\n\nexport const ConnectedRandomScramble = connect((state: ApplicationState) => ({\n  robotServer: getRobotServer(state),\n}))(RandomScramble);\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Button, TextField } from \"@material-ui/core\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport { ApplicationState } from \"app/common/store\";\n\nimport { getRobotServer } from \"app/robot/store/selectors\";\n\nimport { fiveSideSolver } from \"app/common/cube/solvers/five-side-solver\";\nimport { CubePreview } from \"app/cube-preview\";\nimport {\n  validateAlgorithm,\n  invertAlgorithm,\n} from \"app/common/cube/libs/algorithms\";\nimport { executeScramble } from \"app/robot/bluetooth-utils\";\nimport { ButtonRow, ContentContainer } from \"app/common/styled-components\";\n\ninterface ManualScrambleProps {\n  robotServer: BluetoothRemoteGATTServer | null;\n}\n\nexport function ManualScramble(props: ManualScrambleProps): JSX.Element {\n  const [scramble, setScramble] = useState<string>(\"\");\n  const [hasError, setHasError] = useState(false);\n  return (\n    <ContentContainer>\n      <form noValidate autoComplete=\"off\" className=\"container\">\n        <TextField\n          id=\"manual-scramble\"\n          label=\"Manual Scramble\"\n          multiline\n          rowsMax={4}\n          fullWidth\n          InputLabelProps={{\n            shrink: true,\n          }}\n          error={hasError}\n          helperText={hasError && \"Invalid Scramble Code\"}\n          onBlur={(event: React.FocusEvent<HTMLInputElement>) => {\n            const manualScrambleValue = event.target.value;\n            if (manualScrambleValue.length > 0) {\n              if (validateAlgorithm(manualScrambleValue)) {\n                const fiveSideSolve = fiveSideSolver(manualScrambleValue);\n                if (fiveSideSolve) {\n                  const fiveSideScramble = invertAlgorithm(fiveSideSolve);\n                  setScramble(fiveSideScramble);\n                }\n              } else {\n                setHasError(true);\n                setScramble(\"\");\n              }\n            } else {\n              setHasError(false);\n              setScramble(\"\");\n            }\n          }}\n        />\n      </form>\n      <CubePreview scrambleCode={scramble} />\n      <ButtonRow>\n        <Button\n          variant=\"contained\"\n          disabled={!Boolean(props.robotServer) && Boolean(scramble)}\n          onClick={() => executeScramble(props.robotServer, scramble)}\n        >\n          <FormattedMessage id=\"scramble.actions.send\" />\n        </Button>\n      </ButtonRow>\n    </ContentContainer>\n  );\n}\n\nexport const ConnectedManualScramble = connect((state: ApplicationState) => ({\n  robotServer: getRobotServer(state),\n}))(ManualScramble);\n","import React, { useEffect } from \"react\";\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  BottomNavigation,\n  BottomNavigationAction,\n  Paper,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from \"@material-ui/core\";\nimport { Shuffle, Layers, Edit } from \"@material-ui/icons\";\nimport { FormattedMessage } from \"react-intl\";\nimport styled from \"styled-components/macro\";\nimport { useDispatch } from \"react-redux\";\n\nimport { ConnectedRobotWidget } from \"app/robot/widget\";\nimport { ConnectedCFOPScramble } from \"app/cfop-scramble\";\nimport { fiveSideSearch } from \"app/common/cube/solvers/five-side-solver\";\nimport { ConnectedRandomScramble } from \"app/random-scramble\";\nimport { ConnectedManualScramble } from \"app/manual-scramble\";\nimport {\n  connectToKnownGANRobots,\n  ExperimentalFeatureNotSupported,\n} from \"app/robot/bluetooth-utils\";\nimport { registerRobot, unregisterRobot } from \"app/robot/store/actions\";\n\nconst Screen = styled.div.attrs({ className: \"flex flex-col h-screen\" })``;\n\nconst MenuItemContent = styled.div.attrs({\n  className: \"computer:flex hidden flex-row items-center\",\n})``;\n\nconst CompactMenuItemContent = styled.div.attrs({\n  className:\n    \"hidden landscape:inline-flex flex-col items-center justify-center text-bg-txt w-full\",\n})``;\n\nconst IconContainer = styled.div.attrs({\n  className: \"flex flex-row ml-auto\",\n})``;\n\nconst IconWrapper = styled.div.attrs({\n  className: \"text-bg-icon\",\n})``;\n\nexport const MainScreen = (): JSX.Element => {\n  const [navigationValue, setNavigation] = React.useState(\"random\");\n  const dispatch = useDispatch();\n  const handleChange = (\n    event: React.ChangeEvent<unknown>,\n    newValue: string\n  ) => {\n    setNavigation(newValue);\n  };\n\n  useEffect(() => {\n    fiveSideSearch.initialize();\n    (async () => {\n      try {\n        const device = await connectToKnownGANRobots();\n        dispatch(registerRobot(device));\n        device.addEventListener(\"gattserverdisconnected\", () => {\n          dispatch(unregisterRobot());\n        });\n      } catch (e) {\n        if (!(e instanceof ExperimentalFeatureNotSupported)) {\n          console.error(e);\n        }\n      }\n    })();\n  }, []);\n\n  return (\n    <Screen>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Typography variant=\"h5\">\n            <FormattedMessage id=\"appTitle\" />\n          </Typography>\n          <IconContainer>\n            <ConnectedRobotWidget />\n          </IconContainer>\n        </Toolbar>\n      </AppBar>\n\n      <div className=\"flex flex-row h-full w-full\">\n        <Paper className=\"hidden landscape:block computer:block w-24 computer:w-48\">\n          <List>\n            <ListItem\n              button\n              key=\"random\"\n              selected={navigationValue === \"random\"}\n              onClick={() => setNavigation(\"random\")}\n            >\n              <MenuItemContent>\n                <ListItemIcon>\n                  <Shuffle />\n                </ListItemIcon>\n                <ListItemText primary=\"RANDOM\" />\n              </MenuItemContent>\n\n              <CompactMenuItemContent>\n                <IconWrapper>\n                  <Shuffle />\n                </IconWrapper>\n                <span>RANDOM</span>\n              </CompactMenuItemContent>\n            </ListItem>\n\n            <ListItem\n              button\n              key=\"cfop\"\n              selected={navigationValue === \"cfop\"}\n              onClick={() => setNavigation(\"cfop\")}\n            >\n              <MenuItemContent>\n                <ListItemIcon>\n                  <Layers />\n                </ListItemIcon>\n                <ListItemText primary=\"CFOP\" />\n              </MenuItemContent>\n\n              <CompactMenuItemContent>\n                <IconWrapper>\n                  <Layers />\n                </IconWrapper>\n                <span>CFOP</span>\n              </CompactMenuItemContent>\n            </ListItem>\n\n            <ListItem\n              button\n              key=\"manual\"\n              selected={navigationValue === \"manual\"}\n              onClick={() => setNavigation(\"manual\")}\n            >\n              <MenuItemContent>\n                <ListItemIcon>\n                  <Edit />\n                </ListItemIcon>\n                <ListItemText primary=\"MANUAL\" />\n              </MenuItemContent>\n\n              <CompactMenuItemContent>\n                <IconWrapper>\n                  <Edit />\n                </IconWrapper>\n                <span>MANUAL</span>\n              </CompactMenuItemContent>\n            </ListItem>\n          </List>\n        </Paper>\n\n        <div className=\"flex flex-grow flex-col h-full\">\n          {navigationValue === \"random\" && <ConnectedRandomScramble />}\n          {navigationValue === \"cfop\" && <ConnectedCFOPScramble />}\n          {navigationValue === \"manual\" && <ConnectedManualScramble />}\n          {\"alsjdfka\"}\n\n          <div className=\"landscape:hidden computer:hidden w-full mt-auto\">\n            <BottomNavigation\n              showLabels\n              value={navigationValue}\n              onChange={handleChange}\n              className=\"w-full\"\n            >\n              <BottomNavigationAction\n                icon={<Shuffle />}\n                value=\"random\"\n                label=\"RANDOM\"\n                aria-label=\"random\"\n              />\n              <BottomNavigationAction\n                icon={<Layers />}\n                value=\"cfop\"\n                label=\"CFOP\"\n                aria-label=\"cfop\"\n              />\n              <BottomNavigationAction\n                icon={<Edit />}\n                value=\"manual\"\n                label=\"MANUAL\"\n                aria-label=\"manual\"\n              />\n            </BottomNavigation>\n          </div>\n        </div>\n      </div>\n    </Screen>\n  );\n};\n","export function importAll<T = unknown>(\n  requireContext: __WebpackModuleApi.RequireContext\n): Record<string, T> {\n  const importCache: Record<string, T> = {};\n  requireContext\n    .keys()\n    .forEach(\n      (moduleKey: string) =>\n        (importCache[moduleKey] = requireContext(moduleKey))\n    );\n  return importCache;\n}\n","import pathParse from \"path-parse\";\nimport { importAll } from \"app/common/webpack\";\n\ninterface Translations {\n  [key: string]: string | Translations;\n}\n\n// import json translations\nconst translations = importAll<Translations>(\n  require.context(\"../\", true, /\\/translations\\/.*\\.json$/)\n);\n\nconst flattenTranslations = (trans: Translations, keys: string[] = []) =>\n  Object.keys(trans).reduce((acc, key) => {\n    const currentKeys = [...keys, key];\n    const value = trans[key];\n    if (typeof value === \"object\")\n      acc = { ...acc, ...flattenTranslations(value, currentKeys) };\n    else acc[currentKeys.join(\".\")] = value;\n    return acc;\n  }, {} as Record<string, string>);\n\n// merge translation files with the same locale\nconst messageMap = Object.keys(translations).reduce((acc, filepath) => {\n  const locale = pathParse(filepath).name;\n  acc[locale] = {\n    ...acc[locale],\n    ...flattenTranslations(translations[filepath]),\n  };\n  return acc;\n}, {} as Record<string, Record<string, string>>);\n\nexport const locale = navigator.language;\nexport const messages = messageMap[locale.toLowerCase()];\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister(): void {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { IntlProvider } from \"react-intl\";\nimport { StylesProvider } from \"@material-ui/core/styles\";\n\nimport { MainScreen } from \"app/main-screen\";\nimport { createStore } from \"app/common/store\";\nimport { messages, locale } from \"translations\";\nimport { importAll } from \"app/common/webpack\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\n// import fonts\nimport \"fontsource-roboto/300.css\";\nimport \"fontsource-roboto/400.css\";\nimport \"fontsource-roboto/500.css\";\nimport \"fontsource-roboto/700.css\";\n\n// execute any init scripts\nimportAll(require.context(\"./\", true, /\\/on-startup\\.(ts|tsx)$/));\n\n// include all global stylesheets\nimportAll(require.context(\"./\", true, /\\.css$/));\n\n// create store\nconst store = createStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <IntlProvider locale={locale} messages={messages}>\n      <StylesProvider injectFirst>\n        <MainScreen />\n      </StylesProvider>\n    </IntlProvider>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","import { PayloadAction } from \"@reduxjs/toolkit\";\n\nexport const payloadReducer = <S, P>(state: S, action: PayloadAction<P>): P => {\n  return action.payload;\n};\n\nexport const valueReducer = <T>(value: T): (() => T) => () => value;\n","import { createReducer, combineReducers } from \"@reduxjs/toolkit\";\nimport { registerRobot, unregisterRobot } from \"app/robot/store/actions\";\nimport { RobotState } from \"app/robot/store/types\";\nimport { payloadReducer, valueReducer } from \"app/common/store-reducers\";\n\nexport default combineReducers<RobotState>({\n  device: createReducer<RobotState[\"device\"]>(null, (builder) => {\n    builder.addCase(registerRobot, payloadReducer);\n    builder.addCase(unregisterRobot, valueReducer(null));\n  }),\n});\n","import { registerReducer } from \"app/common/store\";\n\nimport { RobotState } from \"app/robot/store/types\";\nimport reducer from \"app/robot/store/reducer\";\n\ndeclare module \"app/common/store\" {\n  interface ApplicationState {\n    robot: RobotState;\n  }\n}\n\nregisterReducer(\"robot\", reducer);\n","import { createAction } from \"@reduxjs/toolkit\";\n\nconst actionPrefix = \"setup\";\n\nexport const registerRobot = createAction<BluetoothDevice>(\n  `${actionPrefix}/register_robot`\n);\n\nexport const unregisterRobot = createAction(`${actionPrefix}/unregister_robot`);\n","import { Reducer } from \"redux\";\nimport { configureStore, EnhancedStore } from \"@reduxjs/toolkit\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { SagaIterator } from \"redux-saga\";\nimport { call, spawn, delay } from \"redux-saga/effects\";\n\n// ApplicationState will be dynamically populated from on-startup.ts scripts\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ApplicationState {}\nconst reducerRegistry: Record<string, Reducer> = {};\n\nexport function registerReducer<TKey extends keyof ApplicationState>(\n  key: TKey,\n  reducer: Reducer<ApplicationState[TKey]>\n): void {\n  reducerRegistry[key] = reducer;\n}\n\nexport type Saga = (...args: unknown[]) => SagaIterator;\nconst sagaRegistry: Saga[] = [];\n\nexport function registerSagas(sagas: Saga[]): void {\n  sagaRegistry.push(...sagas);\n}\n\nfunction* makeRestartable(saga: Saga) {\n  while (true) {\n    try {\n      yield call(saga);\n      console.error(\"Unexpected root saga termination\", saga);\n    } catch (e) {\n      console.error(\"Saga error, the saga will be restarted\", e);\n    }\n    yield delay(500);\n  }\n}\n\nfunction* rootSaga() {\n  yield sagaRegistry.map((saga) => spawn(makeRestartable, saga));\n}\n\nexport function createStore(): EnhancedStore {\n  const sagaMiddleware = createSagaMiddleware();\n  const store = configureStore({\n    reducer: reducerRegistry,\n    middleware: [sagaMiddleware],\n  });\n  sagaMiddleware.run(rootSaga);\n  return store;\n}\n"],"sourceRoot":""}